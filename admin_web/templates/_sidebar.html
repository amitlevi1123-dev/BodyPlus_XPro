<!-- admin_web/templates/_sidebar.html -->
<aside class="fixed right-0 top-0 h-full w-64 bg-white border-l border-gray-200 shadow-sm">
  <div class="p-4 border-b">
    <a href="{{ url_for('dashboard') }}">
      <img src="{{ url_for('static', filename='images/logo.png') }}"
           alt="BodyPlus XPro"
           class="h-10 w-auto mx-auto"
           onerror="this.style.display='none'">
    </a>
  </div>

  {# ×©× ×”-endpoint ×”× ×•×›×—×™ ×œ×¦×•×¨×š ×”×“×’×©×ª ××§×˜×™×‘ #}
  {% set ep = request.endpoint.split('.')[-1] if request.endpoint else '' %}

  <nav class="p-3 space-y-1 text-sm">

    <a href="{{ url_for('dashboard') }}"
       class="flex items-center justify-between px-3 py-2 rounded-lg
              {{ 'bg-sky-100 text-sky-600 font-semibold' if ep=='dashboard' else 'text-gray-700 hover:bg-gray-50' }}">
      <span>×œ×•×— ×‘×§×¨×”</span>
      <span class="text-xs text-gray-400">{{ app_version|default('dev') }}</span>
    </a>

    <a href="{{ url_for('metrics_page') }}"
       class="block px-3 py-2 rounded-lg
              {{ 'bg-sky-100 text-sky-600 font-semibold' if ep=='metrics_page' else 'text-gray-700 hover:bg-gray-50' }}">
      ××“×“×™×
    </a>

    <a href="{{ url_for('logs_page') }}"
       class="block px-3 py-2 rounded-lg
              {{ 'bg-sky-100 text-sky-600 font-semibold' if ep=='logs_page' else 'text-gray-700 hover:bg-gray-50' }}">
      ×œ×•×’×™×
    </a>

    <a href="{{ url_for('compare_page') }}"
       class="block px-3 py-2 rounded-lg
              {{ 'bg-sky-100 text-sky-600 font-semibold' if ep=='compare_page' else 'text-gray-700 hover:bg-gray-50' }}">
      ×”×©×•×•××”
    </a>

    {# --- ×§×‘×•×¦×”: ×•×™×“××• --- #}
    <div class="mt-3 mb-1 px-3 text-xs font-semibold text-gray-400 select-none">×•×™×“××•</div>

    {# ×¢××•×“ ×•×™×“××• (××¦×œ××”) ×”×§×™×™× #}
    <a href="{{ url_for('video_page') }}"
       class="block px-3 py-2 rounded-lg
              {{ 'bg-sky-100 text-sky-600 font-semibold' if ep=='video_page' else 'text-gray-700 hover:bg-gray-50' }}">
      ×•×™×“××• (××¦×œ××”)
    </a>

    {# ×¢××•×“ Capture (×©×™×“×•×¨ ××”×“×¤×“×¤×Ÿ ×œ×©×¨×ª). ×ª×•××š ×‘×©××•×ª endpoint ×©×•× ×™×: capture_page ××• capture #}
    {% if has_endpoint('capture_page') %}
      {% set capture_href = url_for('capture_page') %}
      {% set capture_active = (ep == 'capture_page') %}
    {% elif has_endpoint('capture') %}
      {% set capture_href = url_for('capture') %}
      {% set capture_active = (ep == 'capture') %}
    {% else %}
      {% set capture_href = '/capture' %}
      {% set capture_active = (request.path == '/capture') %}
    {% endif %}

    <a href="{{ capture_href }}"
       class="block px-3 py-2 rounded-lg
              {{ 'bg-green-100 text-green-700 font-semibold' if capture_active else 'text-gray-700 hover:bg-gray-50' }}">
      ×©×™×“×•×¨ ××”×“×¤×“×¤×Ÿ (Capture)
    </a>

    {# ×§×™×¦×•×¨ ×œ×¤×ª×™×—×ª ×”-MJPEG ×™×©×™×¨×•×ª ×‘×˜××‘ ×—×“×© ×¢× HUD #}
    <a href="/video/stream.mjpg?hud=1" target="_blank" rel="noopener"
       class="block px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50">
      ×¤×ª×™×—×ª ×–×¨× MJPEG â†—
    </a>

    {% if has_endpoint('upload_video.upload_video_page') %}
      <a href="{{ url_for('upload_video.upload_video_page') }}"
         class="block px-3 py-2 rounded-lg
                {{ 'bg-sky-100 text-sky-600 font-semibold' if ep=='upload_video_page' else 'text-gray-700 hover:bg-gray-50' }}">
        ×”×¢×œ××ª ×•×™×“××• ğŸ¬
      </a>
    {% endif %}

    {% if has_endpoint('exercise_page') %}
      <a href="{{ url_for_safe('exercise_page') }}"
         class="block px-3 py-2 rounded-lg
                {{ 'bg-sky-100 text-sky-600 font-semibold' if ep=='exercise_page' else 'text-gray-700 hover:bg-gray-50' }}">
        ×–×™×”×•×™ ×ª×¨×’×™×œ
      </a>
    {% endif %}

    {% if has_endpoint('system_page') %}
      <a href="{{ url_for_safe('system_page') }}"
         class="block px-3 py-2 rounded-lg
                {{ 'bg-sky-100 text-sky-600 font-semibold' if ep=='system_page' else 'text-gray-700 hover:bg-gray-50' }}">
        ××¦×‘ ××¢×¨×›×ª
      </a>
    {% else %}
      <span class="block px-3 py-2 rounded-lg text-gray-300 cursor-not-allowed select-none"
            title="×”×¢××•×“ ××¦×‘ ××¢×¨×›×ª ×˜×¨× ×”×•×¤×¢×œ ×‘×©×¨×ª">
        ××¦×‘ ××¢×¨×›×ª
      </span>
    {% endif %}

    <a href="{{ url_for('settings_page') }}"
       class="block px-3 py-2 rounded-lg
              {{ 'bg-sky-100 text-sky-600 font-semibold' if ep=='settings_page' else 'text-gray-700 hover:bg-gray-50' }}">
      ×”×’×“×¨×•×ª
    </a>

  </nav>
</aside>

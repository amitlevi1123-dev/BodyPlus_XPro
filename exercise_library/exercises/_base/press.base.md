מושלם 💪
אז הנה גרסה **מלאה, מסודרת וסופית** של האיפיון הפשוט שלך למשפחת *לחיצות (press)* —
כוללת את כל מה שאתה באמת צריך כרגע, **בלי עומס**, עם **בדיקה מה חסר** ו־**רעיונות שדרוג עתידיים** אם תרצה לפתח אותה הלאה.

---

# 🧱 איפיון משפחת לחיצות (Press Family)

## 🎯 מטרה

איחוד כל תרגילי הלחיצה בפלג גוף עליון — עם ציוד או בלעדיו:

* לחיצות חזה (שטוחה, שיפוע עליון/תחתון, מכונה)
* לחיצות כתפיים (ישיבה, עמידה, OHP)
* תרגילי משקל גוף — כמו שכיבות סמיכה

המטרה: למדוד **טווח תנועה, יציבה, שליטה בקצב, ואיכות כללית של ביצוע.**

---

## ⚙️ מבנה כללי

* **press.base.yaml** – בסיס אחיד לכל התרגילים.
* כל תרגיל יורש ממנו (`parent: press.base`) ומוסיף רק:

  * שם תרגיל (`display_name`)
  * סוג ציוד (`equipment`)
  * כיוון תנועה (`direction`: up / down / diagonal)
  * טווח תנועה יעד (ROM)
  * סוג טופ (נעילה / תחת מתח / עצירה למטה)

---

## 🧩 מדדים קיימים שבהם משתמשים (מתוך aliases.yaml בלבד)

לא נדרש שום חישוב חדש. הכול על בסיס נתונים שכבר קיימים:

| קטגוריה      | מדד                                                                               | תפקיד                              |
| ------------ | --------------------------------------------------------------------------------- | ---------------------------------- |
| זיהוי הגוף   | `pose.available`, `pose.confidence`, `average_visibility`                         | לוודא שהגוף מזוהה בצורה אמינה      |
| זוויות תנועה | `elbow_left_deg`, `elbow_right_deg`, `shoulder_left_deg`, `shoulder_right_deg`    | למדוד פתיחה/סגירה של הזרועות       |
| יציבה        | `torso_forward_deg`, `spine_flexion_deg`, `spine_curvature_side_deg`              | לבדוק שהגב ניטרלי ויציב            |
| עומק/גובה    | `hands_center_y`, `object_y`, `wrist_left_y_px`, `wrist_right_y_px`               | עומק תנועה במקרה שאין מדידות זווית |
| טמפו וקצב    | `rep.timing_s`, `rep.ecc_s`, `rep.con_s`, `rep.pause_top_s`, `rep.pause_bottom_s` | לבדוק מהירות ושליטה                |

---

## 📏 מה נמדד

### 1. טווח תנועה (ROM)

* האם המרפקים והכתפיים נעים בטווח תקין (לפי יעד בווריאנט).
* אם אין נתוני זוויות — נבדק **שינוי גובה הידיים או הגוף** (בתרגילי משקל גוף).
* עומק חלקי = הורדת ניקוד, עומק יציב = ציון גבוה.

### 2. יציבה ובקרה

* הגב צריך להישאר ישר וניטרלי.
* אין עיקום צדדי או קימור.
* בישיבה – לא להתנדנד בגוף; בעמידה – ברכיים רכות.

### 3. טמפו ושליטה

* משך כל חזרה: **2–5 שניות.**
  פחות = מהיר מדי, יותר = איטי מדי.
* ירידה (eccentric): 1–2 שנ׳.
* עלייה (concentric): 1–2 שנ׳.
* עצירה קצרה בטופ או בתחתית (0.2–0.5 שנ׳) משפרת ציון.

---

## 🔄 כיוון התנועה (direction)

| סוג תרגיל                | כיוון               | הערה                         |
| ------------------------ | ------------------- | ---------------------------- |
| לחיצת חזה / שכיבות סמיכה | `upward_horizontal` | לחיצה כלפי מעלה במישור אופקי |
| לחיצת כתפיים             | `upward_vertical`   | לחיצה כלפי מעלה מעל הראש     |
| שיפוע עליון              | `upward_diagonal`   | לחיצה בזווית של 30–45°       |
| שיפוע תחתון              | `downward_diagonal` | לחיצה בזווית כלפי מטה        |

> הכיוון משפיע רק על זיהוי “טופ” ו“תחתית” – לא נדרש חישוב חדש.

---

## 🧮 ניקוד בסיסי

| תחום       | משקל | מה נבדק                    |
| ---------- | ---- | -------------------------- |
| טווח תנועה | 40%  | האם ה-ROM מלא או חלקי      |
| יציבה      | 30%  | גב ישר, אין עיקום או קימור |
| קצב ושליטה | 30%  | תנועה רציפה, לא מהירה מדי  |

* אם אין מדדים של טווח תנועה – נבדק עומק לפי גובה הידיים (`hands_center_y`).
* אם אין גם זה → החזרה מסומנת כ־`missing_critical`.

---

## ⏱️ טווחי זמן מומלצים

| שלב                   | זמן         |
| --------------------- | ----------- |
| חזרה מלאה             | 2–5 שנ׳     |
| ירידה (eccentric)     | 1–2 שנ׳     |
| עלייה (concentric)    | 1–2 שנ׳     |
| עצירה קצרה בטופ/תחתית | 0.2–0.5 שנ׳ |

---

## 🧍‍♂️ מדיניות TOP

| סוג תרגיל          | מדיניות טופ                            |
| ------------------ | -------------------------------------- |
| לחיצת חזה          | עצירה קצרה ונעילה נקייה                |
| לחיצת כתפיים / OHP | שמירה על מתח, לא לנעול                 |
| שכיבות סמיכה       | עצירה קצרה גם למטה (מגע חזה) וגם למעלה |

---

## 📡 ספירת חזרות

* לפי שינוי בזווית מרפקים או גובה הידיים/גוף.
* שינוי מינימלי: **20° או 5% מהגובה הכולל.**
* מינימום זמן חזרה: 0.5 שנ׳
* מקסימום זמן חזרה: 6 שנ׳
* אם אין תנועה מספקת – החזרה לא תיספר.

---

## 🧱 מבנה הקובץ press.base.yaml

* `targets` — טווחי תנועה כלליים לכל המשפחה (אלו שמדרסים בווריאנטים).
* `criteria` — שלושת התחומים (ROM, יציבה, טמפו).
* `scoring` — משקל יחסי פשוט.
* `rep_signal` — קביעת מקור ספירת חזרות.
* `hooks` — עצירות או חוקים נקודתיים (למשל טופ תחת מתח).

---

## ✅ דוגמאות שימוש (בדריסות שלך)

| תרגיל          | ציוד       | כיוון             | טופ        | טווח יעד          |
| -------------- | ---------- | ----------------- | ---------- | ----------------- |
| לחיצת חזה במוט | barbell    | upward_horizontal | נעילה מלאה | מרפק 70°, כתף 40° |
| לחיצת כתפיים   | dumbbell   | upward_vertical   | תחת מתח    | מרפק 60°, כתף 55° |
| שכיבות סמיכה   | bodyweight | upward_horizontal | עצירה למטה | מרפק 80°, כתף 45° |

---

## 🧰 התנהגות בהיעדר נתונים

* אם חסר מדד אחד (למשל כתף ימין) – משתמשים במדד הצד השני.
* אם שני הצדדים חסרים – fallback לגובה ידיים או גוף.
* אם גם זה חסר → `missing_critical` (החזרה לא נמדדת).
* איכות מדידה נמוכה → מוצג אזהרה `"low_pose_confidence"`.

---

## 🌱 שיפורים עתידיים (לא חובה, רק אם תרצה להעמיק בהמשך)

| תחום          | מה לשפר                                  | הסבר                                  |
| ------------- | ---------------------------------------- | ------------------------------------- |
| מסלול תנועה   | `bar_path` או `object_x`                 | לזהות אם המוט עולה ישר או באלכסון     |
| סימטריה       | `shoulder_diff_deg` / `elbow_diff_deg`   | לבדוק אם צד אחד עובד יותר מהשני       |
| אחיזה         | `grip_width_px`                          | למדוד רוחב אחיזה ולהוסיף פידבק אישי   |
| ראש           | `head_pitch_deg` מול `torso_forward_deg` | לבדוק אם הראש מוטה קדימה מדי          |
| עומק יחסי     | `rep_depth_ratio`                        | לחשב עומק יחסי מתוך שינוי גובה הידיים |
| עומס משקל גוף | future: נורמליזציה לפי bodyweight        | שימוש פוטנציאלי בהמשך לפידבק אישי     |

---

## 🧭 סיכום

* משפחת **press** היא אחת הבסיסיות ביותר במערכת.
* מתאימה גם לתרגילי **ציוד וגם למשקל גוף**.
* פשוטה, יציבה, לא דורשת מדדים חדשים.
* הווריאנטים שלך ישלטו על כל ההבדלים — סוג ציוד, כיוון, טווח, ונעילה.
* המערכת עצמה תשמור על עקביות, פשטות וקלות תחזוקה.

---

רוצה שאבנה עכשיו את הקובץ `press.base.yaml` לפי זה — גרסה נקייה שתעבוד ישר עם כל הווריאנטים שלך (כולל שכיבות סמיכה)?

מעולה 👌
אז הנה גרסה **מלאה, ברורה, ומסודרת** של האיפיון למשפחת **סקוואט (Squat Family)** –
כתובה כך שכל מאמן או מפתח יבין בדיוק מה למדוד, למה, ואיך זה נכנס לציון.
(זה לא הקובץ yaml, אלא תיעוד הסבר ב־Markdown שאתה יכול לשמור כ־
`docs/specs/family_squat_v3.md`.)

---

```markdown
# 🏋️‍♂️ משפחת Squat — איפיון מקצועי ומדויק (v3)

> **מטרה כללית:**  
> למדוד ולנתח את טכניקת הסקוואט בצורה חכמה, שמאזנת בין בטיחות, טכניקה ושליטה.  
> המשתמש יקבל ציון המשקף את האיכות הכללית של הביצוע – עם דגש על בטיחות, אך גם פידבק מקצועי ומשמעותי לאנשים שמבצעים נכון.

---

## 🔹 עקרונות כלליים

| תחום | עיקרון |
|------|---------|
| **בטיחות קודמת לכול** | עגילת גב, קריסת ברכיים או עיקום צדדי – נחשבים גורמים שמורידים משמעותית את הציון. |
| **שונות טבעית מותרת** | לא להעניש על סגנון אישי כמו זווית גב טבעית או פתיחת ירכיים סבירה. |
| **עומק חכם** | ככל שהירידה עמוקה יותר עד 90°, הציון עולה; מעבר לזה לא מוסיף ניקוד. |
| **מגע עקבים חובה** | אם העקבים עולים מהרצפה – מתקבלת הערה וציון נמוך יותר. |
| **עמידה נכונה** | כפות הרגליים מעט פתוחות החוצה (8–20°), מבט קדימה, גב וצוואר בקו אחד. |
| **פידבק חיובי** | גם בתרגול מושלם המשתמש יקבל חיזוק חיובי (“ביצוע מצוין”, “עומק טוב”). |

---

## 🔹 מדדים שנמדדים (Sensors / aliases)

| תחום | מדד (alias) | יחידה | שימוש |
|------|--------------|--------|--------|
| עגילת גב | `spine_flexion_deg` | ° | זווית קימור הגב |
| עיקום צדדי | `spine_curvature_side_deg` | ° | סטייה צידית של עמוד השדרה |
| יישור ברכיים | `knee_foot_alignment_left_deg`, `knee_foot_alignment_right_deg` | ° | מדידת ולגוס (קריסה פנימה) |
| עומק סקוואט | `knee_left_deg`, `knee_right_deg` | ° | מדידת עומק הירידה |
| רוחב עמידה | `features.stance_width_ratio` | × | השוואה לרוחב הכתפיים |
| זווית כפות רגליים | `toe_angle_left_deg`, `toe_angle_right_deg` | ° | פתיחת כפות הרגליים החוצה |
| ראש וצוואר | `head_pitch_deg` | ° | נטיית הראש לעומת עמוד השדרה |
| עקבים נעוצים | `heel_lift_left`, `heel_lift_right` | bool | האם העקב נשאר על הרצפה |
| טמפו | `rep.timing_s` | s | זמן כל חזרה |
| דורסיפלקשן | `ankle_dorsi_left_deg`, `ankle_dorsi_right_deg` | ° | זווית קרסול בעת ירידה (לבדיקה נוספת) |
| נטיית גו | `torso_forward_deg` | ° | אינדיקציה כללית על יציבה |
| נראות הגוף | `pose.confidence`, `average_visibility` | 0–1 | איכות המדידה |

---

## 🔹 חלוקת הציון הכולל

| קבוצה | משמעות | משקל |
|--------|---------|--------|
| **בטיחות** | הגנה על עמוד השדרה והברכיים | 60% |
| **טכניקה כללית** | עמידה, קצב ועומק | 40% |

---

## 🛡️ קריטריוני בטיחות (60%)

| קריטריון | מדד | טווח טוב | בינוני | גרוע | משקל |
|-----------|------|------------|----------|--------|--------|
| עגילת גב | `spine_flexion_deg` | ≤10° | 10–20° | ≥35° | 2.0 |
| עיקום צדדי | `spine_curvature_side_deg` | ≤5° | 5–10° | ≥20° | 1.5 |
| קריסת ברכיים (Valgus) | `max(|kfa_L|,|kfa_R|)` | ≤5° | 5–10° | ≥20° | 2.0 |

> **הערה:**  
> חריגה באחד מהערכים האלה מפעילה תקרת בטיחות (Safety Cap) שמגבילה את הציון הכולל.

---

## ⚙️ קריטריוני טכניקה (40%)

| קריטריון | מדד | טווח טוב | בינוני | גרוע | משקל |
|-----------|------|------------|----------|--------|--------|
| עומק סקוואט | `min(knee_left,right_deg)` | ≤90° = מושלם | 90–150° יורד בהדרגה | ≥150° גרוע | 1.2 |
| רוחב עמידה | `features.stance_width_ratio` | 0.9–1.2 | 0.8–1.3 | <0.7 / >1.5 | 0.8 |
| זווית כפות רגליים | `toe_angle_avg` | 8–20° | 0–8° / 20–30° | <0° / >30° | 0.8 |
| יישור ראש–עמוד שדרה | `|head_pitch_deg - spine_flexion_deg|` | ≤10° | 10–20° | ≥30° | 0.8 |
| עקבים נעוצים | `max(heel_lift_left,right)` | 0 = נעוץ | — | 1 = מורם | 0.6 |
| קצב חזרה (טמפו) | `rep.timing_s` | 0.7–2.5s | 0.5–3.5s | <0.4 / >4.0 | 0.5 |
| דורסיפלקשן (פידבק בלבד) | `ankle_dorsi_min_deg` | ≥25° | 15–25° | <15° | 0.3 |

---

## 📏 תקרות בטיחות (Safety Caps)

| תנאי | תקרת ציון כללית |
|-------|------------------|
| עגילת גב חמורה | cap = 0.7 |
| קריסת ברכיים | cap = 0.75 |
| עיקום צדדי | cap = 0.8 |

---

## 💬 פידבק מילולי (לאחר סט)

| מצב | משפט |
|------|-------|
| גב מתעגל | “שמור על גב ניטרלי – אל תרד מעבר לנקודה שבה הגב מתעגל.” |
| ברכיים קורסות פנימה | “הברכיים נקרסות פנימה – דחוף אותן החוצה לאורך הירידה.” |
| עקבים מתרוממים | “עקבים עולים – שמור עקבים נעוצים בקרקע.” |
| מבט לא נכון | “שמור על מבט קדימה – הראש בקו עם עמוד השדרה.” |
| כפות רגליים סגורות מדי | “סובב מעט את כפות הרגליים החוצה ליציבות טובה יותר.” |
| עומק טוב | “עומק מצוין עם גב ניטרלי – ביצוע מקצועי.” |
| קצב אחיד | “קצב ביצוע טוב ויציב – שליטה מלאה בתנועה.” |

---

## 🎯 רמזים לזיהוי תרגיל (Match Hints)

| פרמטר | ערכים |
|--------|--------|
| must_have | pose.available |
| pose_view | front / front_left / front_right |
| motion_pattern | hip_down / knee_flexion |
| joints_focus | hips / knees / spine |

---

## ✅ עקרונות סופיים

1. **עומק עד 90° = ציון מלא.**  
   מעבר לזה לא מוסיף ניקוד, כדי למנוע עומס על הברכיים.  
2. **בטיחות מעל הכול:**  
   כל עיקום, עגילה או קריסה – מגבילים את הציון.  
3. **עקבים תמיד במגע.**  
   אחרת ניתנת התראה וציון יורד קלות.  
4. **פידבק חיובי גם כשהכול תקין.**  
   המשתמש תמיד מקבל הכוונה – לא רק הערות.  
5. **אין שימוש במדרג A/B/C.**  
   רק ציון מספרי בין 0 ל־1.

---

> קובץ זה מהווה בסיס לכל גרסאות הסקוואט (Bodyweight / Goblet / Barbell).  
> כל גרסה תורשת ממנו ומשנה רק חלק קטן מהספים או המשקלים.

```

---

רוצה שאהפוך את האיפיון הזה ישירות לקובץ YAML (`squat.base.yaml`) לפי אותו מבנה —
שכבר מוכן לשימוש במערכת הניקוד שלך?

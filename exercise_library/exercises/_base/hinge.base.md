# 🧠 דדליפט רגיל עם מוט — איפיון מלא (Variant Spec)

**גרסה:** v1.3  •  **משפחה:** `hinge`  •  **וריאנט:** `deadlift.barbell.conventional`
**מטרה קצרה:** הרמה **מהרצפה** עם **נעילה מלאה** מאומתת בהחזקה קצרה; ניקוד מבוסס **ROM זוויתי** (ירך/גו), **בטיחות גב**, **שליטה בקצב**, ו**יישור רגליים** — עם **דגש מוגבר על עיגול גב**.

---

## 1) מטרות מקצועיות

* **סטנדרט תנועה**: Hinge ברור (לא “סקוואט”), גב ניטרלי, עקבים נעוצים, ברכיים בקו האצבעות.
* **נעילה מלאה**: ציון מלא רק אם קיימת **עצירה קצרה** למעלה (אימות נעילה).
* **מדידה חסינה מצלמה**: עומק/ROM נמדדים **מזוויות** ירך/גו (לא פיקסלים).
* **בטיחות תחילה**: ענישה מודגשת לעיגול גב — גם בדרגת משקל וגם בתקרות בטיחות.
* **שקיפות**: טבלאות משקלים, ספים, ותקרות — כדי לכוונן בקלות.

---

## 2) זיהוי וריאנט (Classifier)

| פרמטר                    | ערך                                                                    |
| ------------------------ | ---------------------------------------------------------------------- |
| **ציוד**                 | `barbell` (מוט) — עדיפות לאיתור `objdet.bar_present`                   |
| **Start Mode**           | `from_floor` (מגע/קרבה לרצפה ב־Setup/Reset)                            |
| **תבנית**                | `hip_hinge`                                                            |
| **זוויות צילום מועדפות** | `side`, `front_left`, `front_right`                                    |
| **אותות עזר**            | `object_y` (מסלול אנכי/מגע רצפה), `hands_center_y`, `hip_y_px` (חירום) |
| **פסילות מהירות**        | אין `pose.available`; אין מוט רוב הזמן; תבנית “סקוואט” מובהקת          |

> שיקולי יציבות ב־Classifier: hysteresis/freeze כדי לא להחליף תרגיל באמצע חזרה.

---

## 3) פאזות ומנגנון ספירה (FSM)

**רצף:** `Setup (קרקע) → Concentric → Top/Lockout (Hold) → Eccentric → Touch & Reset`

**איתותים עיקריים לפאזות וספירה:**

* ראשי: `torso_forward_deg`, `hip_left/right_deg`
* עזר: `object_y` למגע/מסלול (לא לניקוד)

**שער סגירה (Gate) — חייבים את כולם לחזרה תקפה:**

| תנאי                | כלל                                | כישלון → תיוג       |
| ------------------- | ---------------------------------- | ------------------- |
| **זמן כולל**        | `min_rep_ms ≤ timing ≤ max_rep_ms` | `fast` / `slow`     |
| **היפוך אמיתי**     | שהייה ≥ `min_turn_ms` ב־Turn       | `incomplete`        |
| **חזרה ל־top_like** | מרחק סביר מהטופ המקורי             | `incomplete`        |
| **ROM זוויתי**      | ראו סעיף 4                         | `short` / `partial` |

**ברירת מחדל גלובלית (ניתן לדרוס במשפחה/וריאנט):**

| פרמטר                       |          ערך |
| --------------------------- | -----------: |
| `phase_delta`               |           5° |
| `min_turn_ms`               |        100ms |
| `min_rep_ms` / `max_rep_ms` | 500 / 6000ms |
| `min_rom_partial`           |   0.50 (יחס) |
| `min_rom_good`              |   0.80 (יחס) |

> החלפת תרגיל **אחרי Turn**: סוגרים חזרה `closed_on_switch=true` — נספרת לסט, לא לניקוד.

---

## 4) ROM — זוויות בלבד (ירך/גו)

**חישוב:**

* `hip_rom_deg = (hip_max - hip_min)` (ממוצע/מקס בין ימין/שמאל)
* `torso_rom_deg = max(torso_forward_deg) - min(torso_forward_deg)`
* **יחס שמרני**:
  `rom_joint_ratio = min( hip_rom_deg / target_hip_deg , torso_rom_deg / target_torso_deg )`
  `rom_joint_score = clamp(rom_joint_ratio, 0..1)`

**יעדי וריאנט:**

| מצב פתיחה    | יעד ירך (`target_hip_deg`) | יעד גו (`target_torso_deg`) |
| ------------ | -------------------------: | --------------------------: |
| `from_floor` |                    **62°** |                     **36°** |

**ספי ספירה לפי ROM:**

| יחס ROM     | החלטה                                        |
| ----------- | -------------------------------------------- |
| `< 0.50`    | לא נספר (`short`)                            |
| `0.50–0.79` | נספר כ־`partial` (ענישה מתונה)               |
| `≥ 0.80`    | תקין — ממשיך לניקוד מלא (כפוף לנעילה/בטיחות) |

> הערה מקצועית: **אין הבדל בין 99% ל־100%** — איפוס רעש. תקרת “טוב” מתחילה ב־80%+.

---

## 5) מדיניות נעילה (Lockout) — עם פערים ברורים

**מטרה:** ציון מלא **רק** עם נעילה מלאה + עצירה קצרה (אימות).
בנוסף, בטופ נדרוש גב **עוד יותר ניטרלי** (סף קשוח יותר מבשאר החזרה).

| דרגת נעילה         | תנאי עיקרי                  | תנאי יציבה בטופ                      |                מכפיל נעילה |                                                      |          |
| ------------------ | --------------------------- | ------------------------------------ | -------------------------: | ---------------------------------------------------- | -------- |
| **Full**           | `pause_top ≥ 0.30s`         | `spine_flexion ≤ 8°`, `              | head_pitch - torso_forward | ≤ 10°`, `torso_forward ≤ 15°`, `heels_grounded=true` | **1.00** |
| **Almost**         | `0.15–0.29s`                | spine≤10°, head_line≤10°, heels=true |                   **0.65** |                                                      |          |
| **Clean, no hold** | `< 0.15s` (או 0)            | spine≤10°, head_line≤10°, heels=true |                   **0.50** |                                                      |          |
| **Bad top**        | הפרת תנאי יציבה/בטיחות בטופ | —                                    |                   **0.30** |                                                      |          |

**חישוב סופי לחזרה:**
`rep_score = rep_core * lockout_multiplier`
(כאשר `rep_core` כבר כולל משקלים ותקרות בטיחות.)

> פער גדול ומשמעותי בין Full ל־Almost — כדי לשים דגש על **נעילה אמיתית**.

---

## 6) קריטריונים ומשקלים (0–2)

> **ROM זוויתי הוא הקריטי ביותר**, אך **עיגול גב** כמעט זהה במשקלו — כדי להבטיח בטיחות.

| קטגוריה           | קריטריון                         |            משקל |
| ----------------- | -------------------------------- | --------------: |
| **ROM**           | `rom_joint` (ירך/גו)             |        **2.00** |
| **בטיחות**        | `spine_rounding` (עגילת גב)      |        **1.90** |
|                   | `lateral_bend` (עיקום צדדי)      |            1.40 |
|                   | `head_spine` (ראש בקו גו)        |            1.20 |
| **תבנית Hinge**   | `hinge_posture`                  |            1.80 |
|                   | `knee_flex_limit`                |            1.00 |
| **שליטה/קצב**     | `phase_control` (ecc/con/pauses) |            1.50 |
|                   | `tempo` (משך חזרה)               |            1.00 |
|                   | `phase_balance`                  |            0.80 |
| **רגליים/יציבות** | `knee_valgus`                    |            1.40 |
|                   | `heels_grounded`                 |            1.00 |
|                   | `stance_width`                   |            0.80 |
|                   | `toe_angle`                      |            0.60 |
| **היפוך/מסלול**   | `turn_quality`                   |            0.50 |
| **Hook לטופ**     | `top_quality_hook` (לנעילה)      | — (מומר למכפיל) |

**קריטיים (ללא ניקוד אם חסר):**
`pose.available`, `spine_flexion_deg`, `torso_forward_deg`, `hip_left_deg + hip_right_deg`,
אות עזר לפאזות: אחד מ־`object_y / hands_center_y / hip_y_px`,
ואותות טופ לנעילה: `rep.pause_top_s` + יציבה בטופ.

**שקלול סופי:** ממוצע משוקלל של הקריטריונים הזמינים (עם `policy.missing=skip`).

---

## 7) תקרות בטיחות (Safety Caps)

| תנאי                                                   | תקרה (cap) | הערה                              |
| ------------------------------------------------------ | ---------: | --------------------------------- |
| **עגילת גב מורגשת**: `spine_rounding_score ≤ 0.60`     |   **0.80** | היה 0.85 — חידוד הדגש             |
| **שיא עיגילה משמעותי**: `spine_flexion_deg_peak ≥ 20°` |   **0.70** | Cap קשיח — לא מאפשר “ציונים יפים” |
| **קריסת ברך מורגשת**: `knee_valgus_score ≤ 0.60`       |   **0.90** | שמירת ברכיים בקו                  |

**Guard דינמי לעגילה בירידה (ללא קשר ל־caps):**
אם `spine_flexion_bottom_deg - spine_flexion_setup_deg ≥ 8°` → מכפיל עדין ×**0.90**
(עוזר “לחתוך” חזרות שמתחילות ניטראלי ונכנסות לקריסה בתחתית.)

> אם השדות האלה לא זמינים לך בשם הזה — השתמש במינ/מקס/חלון במהלך הירידה.

---

## 8) חלונות טמפו (כוונון/הכוונה)

| פרמטר            | טווח מומלץ                |
| ---------------- | ------------------------- |
| **Rep total**    | 1.2–4.0s                  |
| **Eccentric**    | 0.8–3.0s                  |
| **Concentric**   | 0.6–2.5s                  |
| **Pause bottom** | 0.0–0.8s (סט־אפ קצר מותר) |
| **Pause top**    | **≥0.30s** לנעילה מלאה    |

---

## 9) מנח רגליים ויישור

| פרמטר                  | טווח/יעד                      |   |      |
| ---------------------- | ----------------------------- | - | ---- |
| **stance_width_ratio** | 0.85–1.15 (קרוב לרוחב כתפיים) |   |      |
| **toe_angle**          | 5–20° (פישון קל)              |   |      |
| **knee–toe alignment** |                               | Δ | ≤ 5° |
| **heels_grounded**     | True לאורך כל החזרה           |   |      |

---

## 10) פידבק מקצועי (דוגמאות)

* **ROM חלקי**: “הגדל כיפוף ירך (יעד ~62°) או הטיית גו (יעד ~36°) בצורה מבוקרת.”
* **נעילה לא הוחזקה**: “החזק 0.3–0.5 שנ׳ בעמידה מלאה כדי לאשר נעילה.”
* **גב עגול**: “זוהתה עגילה (שיא {{peak_deg}}°) — הפחת עומס/עומק ושמור גב ניטרלי.”
* **היפוך חד**: “האט מעט בתחתית ושמור שליטה.”
* **קריסה פנימה**: “שמור ברך בקו האצבעות.”
* **עקבים עולים**: “עקבים נעוצים — הזז משקל מעט אחורה.”

> הניסוח מתאים גם להקראה קולית, עברית ניטרלית.

---

## 11) QA מואץ לפני אימוץ

1. סט צד + סט אלכסון קדמי (5–8 חזרות).
2. סט עם החזקת טופ ≥0.30s מול סט ללא עצירה — לבדוק שהפער בציון **גדול** (1.00 מול 0.65/0.50).
3. חזרה אחרונה ללא נעילה מלאה → לאמת הודעת סט מתאימה.
4. בדיקת Cap קשיח: הרץ בכוונה עם גב עגול (≥20°) — תקרה **0.70** צריכה לחול.
5. בדוק ש־ROM זוויתי יציב גם כשמרחק המצלמה משתנה.

---

## 12) סיכום הציון — תרשים זרימה קצר

```
מדדים ← קריטריונים (משקלים) → weighted_mean → Safety Caps → rep_core
                                                       │
                                                       └─ Lockout Multiplier (1.00 / 0.65 / 0.50 / 0.30)
                                                                │
                                                                ▼
                                                          rep_score סופי
```

---

## 13) שיפורים עתידיים (Roadmap)

* **Pelvis tilt/rotation**: גילוי היפראקסטנשן בלוקאאוט ונפילת אגן.
* **Object X / Bar path**: מדד “בר קרוב לגוף” (מסלול אופקי/מרחק גוף).
* **Symmetry indices**: פערי עומק/מהירות ימין–שמאל (hips/shoulders).
* **Phase jerk metrics**: הגנת Turn/Top לפי מהירות/תאוצה מזוויות (הפחתת false turns).
* **Adaptive targets**: יעד ROM/טמפו בהתאמה לאנתרופומטריה.
* **Grip metrics**: רוחב אחיזה כאינדיקטור מסייע ליציבות כתף/מרפק.

---

## 14) למה זה אמין

* **ROM מזוויות** → חסין לסקייל/מרחק/פריים.
* **נעילה עם עצירה** → אימות חד־משמעי לחזרה מלאה.
* **דגש בטיחות** (גב) בשלושה רבדים: משקל, תקרות, Guard דינמי.
* **פערי נעילה ברורים** → מתגמל טכניקה תקנית ומונע “לעגל פינות”.

---

אם זה נראה לך חד ומדויק — אעביר את ההגדרות האלה לקובץ ה־YAML של הווריאנט ונתקדם גם ל־RDL (גרסת “Top תחת מתח”, בלי דרישת נעילה מלאה).

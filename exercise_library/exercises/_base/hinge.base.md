# 🧠 משפחת דדליפט / Hinge — איפיון מלא (Spec)

## 🎯 מהי מטרת המשפחה

לאחד את כל תרגילי ההינג׳ (Deadlift/RDL/SLDL/Trap-bar/KB/DB/Bodyweight Hinge) תחת בסיס ניקוד אחד שמודד:

* בטיחות עמוד־שדרה ומנח ראש
* שלמות תבנית ה־Hinge (גו מול ברך)
* שליטה בקצבים ובפאזות
* עומק תנועה יחסי (ROM) לפי **זוויות הירך והגו** — לא לפי פיקסלים
* יציבות עמידה, יישור ברך־כף־רגל ומגע עקבים
* איכות שינוי כיוון (Turn) ואיכות עבודה בצמרת (Top)

> **מדיניות “נעילה למעלה” (Lockout)** אינה נכפית בבסיס: היא תוגדר **בווריאנטים** (למשל: דדליפט רגיל דורש נעילה קצרה; RDL/SLDL מעדיפים “Top תחת מתח” ללא נעילה מלאה).

---

## 🧭 מצבי פתיחה ופאזות (Phase Model)

### Start Modes

* `from_floor` – דדליפט רגיל / טרפ־בר / KB מהרצפה
* `from_standing` – RDL / Stiff-leg / SL-RDL / KB-RDL / DB-RDL / Hinge BW

### רצף פאזות (תמציתי)

* **from_floor:** `Setup → Concentric (Lift) → Top (variant policy) → Eccentric (Descent) → Touch & Reset`
* **from_standing:** `Setup Standing → Eccentric (Descent) → Bottom/Turn → Concentric (Ascent) → Top (variant policy)`

### אותות לזיהוי פאזות

* ראשי: `torso_forward_deg`
* מסייעים: `hip_left_deg, hip_right_deg`
* גיבוי/עזר למסלול: `object_y` (או `hands_center_y`/`hip_y_px`)

---

## 📐 מדידת עומק תנועה (ROM) — לפי זוויות, לא פיקסלים

### חישוב לכל חזרה

* `hip_rom_deg = hip_max - hip_min`  (ממוצע/מקס בין ימין/שמאל)
* `torso_rom_deg = max(torso_forward_deg) - min(torso_forward_deg)`
* ציון שמרני:
  `rom_joint_ratio = min( hip_rom_deg / target_hip_deg , torso_rom_deg / target_torso_deg )`
  `rom_joint_score = clamp(rom_joint_ratio, 0..1)`

### יעדי ROM (ברירת מחדל משפחתית; הווריאנטים ידרסו)

* **from_floor:** `target_hip_deg = 60` ; `target_torso_deg = 35`
* **from_standing:** `target_hip_deg = 48` ; `target_torso_deg = 30`

### ספי ספירה

* `< 0.30` → חזרה קצרה מדי (לא נספרת)
* `0.30–0.50` → חזרה חלקית (`rep.quality=short`, ציון מופחת)
* `≥ 0.50` → חזרה תקפה (הכפלה/מדיניות Top תגיע מהווריאנט)

---

## 🧩 קריטריונים (מה מודדים)

### קריטיים — בלעדיהם **אין ציון כולל**

* `pose.available`
* `spine_flexion_deg`
* `torso_forward_deg`
* `hip_left_deg` + `hip_right_deg`  (ל-ROM זוויתי)
* אות עזר לפאזות/ספירה (לפחות אחד): `object_y` / `hands_center_y` / `hip_y_px`
* **Top policy** מוחל **בווריאנטים** (אין כפייה בבסיס)

### בטיחות

* **spine_rounding** — עגילת גב סגיטאלית
* **lateral_bend** — עיקום צדדי
* **head_spine** — ראש בקו הגו

### תבנית Hinge

* **hinge_posture** — יחס גו/ברך (Hinge ≠ Squat)
* **knee_flex_limit** — ברך פתוחה יחסית (לא להפוך לסקוואט)

### שליטה וקצב

* **tempo** — משך חזרה כולל
* **phase_control** — זמנים נפרדים: `rep.ecc_s`, `rep.con_s`, `rep.pause_bottom_s`, `rep.pause_top_s`
* **phase_balance** — יחס ecc / כלל החזרה

### עמידה/רגליים

* **stance_width** — יחס לרוחב כתפיים
* **toe_angle** — כיוון כפות רגליים
* **knee_valgus** — יישור ברך מול האצבעות
* **heels_grounded** + **foot_contact** — מגע עקבים/כף־רגל

### איכות היפוך וצמרת

* **turn_quality** — שינוי כיוון חלק (ללא “קפיצה”)
* **top_quality_hook** — “נקודת חיבור” למדיניות הווריאנט (נעילה מלאה / Top תחת מתח)

---

## ⚖️ ניקוד (0–2 משקל לכל קריטריון) + תקרות בטיחות

### משקלים מומלצים (משפחה)

* **בטיחות**

  * spine_rounding: **2.0**
  * lateral_bend: 1.4
  * head_spine: 1.2
* **תבנית Hinge**

  * hinge_posture: **1.8**
  * knee_flex_limit: 1.0
* **ROM זוויתי**

  * rom_joint: **1.5**
* **שליטה וקצב**

  * phase_control: **1.5**
  * tempo: 1.0
  * phase_balance: 0.8
* **עמידה/רגליים**

  * knee_valgus: **1.4**
  * heels_grounded: 1.0
  * stance_width: 0.8
  * toe_angle: 0.6
* **איכות היפוך/צמרת**

  * turn_quality: 0.5
  * top_quality_hook: 1.0  *(ציון זה מוכפל/מותאם בווריאנט בהתאם למדיניות Top)*

### סכימה

* ממוצע משוקלל של הקריטריונים הזמינים (קריטיים חובה)
* **Safety Caps** (דוגמא):

  * אם `spine_rounding ≤ 0.6` → cap 0.85
  * אם `knee_valgus ≤ 0.6` → cap 0.90

> מדיניות Top (נעילה מלאה/מתח בצמרת) **לא מוגדרת פה**. ה־base רק מספק את ה-hook (`top_quality_hook`). הכפלת הציון בפועל תגיע מהווריאנט.

---

## 🔁 ספירת חזרות (Rep Logic)

* זיהוי תחילת/סוף חזרה בעיקר מזוויות (שינוי כיוון ב־`torso_forward_deg`/ירך)
* `object_y` משמש לגיבוי/חיזוק כאשר יש ציוד או כשהידיים מייצגות עומס
* ספירת חזרה מותנית ב-ROM זוויתי (סף 0.30) + עמידה בסיסית בקריטריוני בטיחות
* הגדרת איכות Top (נעילה/מתח) והכפלת הציון — **בווריאנט**

---

## 🧱 וריאנטים – היגיון מדיניות Top (רק תיאור, לא יישום)

* **Conventional/Trap-bar (from_floor):**
  “נעילה מלאה” עם עצירה קצרה מאוד למעלה (למשל ≥0.30s) כדי לאשר סגירה. חזרה ללא עצירה → ציון תקף אך מופחת; חזרה אחרונה ללא נעילה → התראה ברמת סט.
* **RDL/SLDL (from_standing):**
  “Top תחת מתח” — אין דרישה לעצירה/נעילה מלאה. אם נעילה “מלאה מדי” או עצירה ארוכה → הורדה קלה (שימור מתח > נעילה).

> שני המצבים משתמשים ב-`top_quality_hook`, אך ממפים אותו לציון שונה (כמכפיל) **בווריאנט**.

---

## 📣 פידבק (חיבור ל־phrases.yaml)

* spine_rounding / lateral_bend / head_spine — הודעות בטיחות ברורות
* rom_joint — “טווח חלקי/מספיק” לפי יחס היעד
* phase_control / tempo — האט/האץ, איזון ecc/con
* knee_valgus / stance / toe_angle / heels — יישור ומגע עקבים
* turn_quality — “היפוך חד/נקי”
* **Top (דרך הווריאנט):**

  * Conventional: “נעילה לא הוחזקה — החזק 0.3–0.5 שנ׳ בעמידה מלאה.”
  * RDL/SLDL: “שמור מתח בצמרת — אל תינעל לגמרי; הימנע מעצירה ארוכה.”

---

## 🧪 QA מהיר לפני אימוץ

* הרץ סט קצר בכל וריאנט ובדוק: ROM זוויתי, פאזות, פידבק בטיחות
* השווה סטים עם/בלי עצירה למעלה (Conventional) וראה שההפרש בניקוד הגיוני
* ב-RDL: בדוק שהכפלת “Top תחת מתח” מתגמל שמירת מתח ולא נעילה
* Edge-cases: עקבים מתרוממים, קריסה פנימה של ברכיים, היפוך חד — מתקבלות אזהרות מתאימות

---

## 🚀 הצעות לשיפור עתידי (Roadmap)

* **Pelvis tilt/rotation** — גילוי היפראקסטנשן בלוק-אאוט וסטיות אגן
* **object_x** — מסלול אופקי (“מוט קרוב לגוף”), מדדי “בר path”
* **Symmetry indices** — הפרשי עומק/מהירות בין צד ימין/שמאל (hips/shoulders)
* **Adaptive targets** — יעד ROM/טמפו מותאם אנתרופומטריה (גובה/אורך גפיים)
* **Phase jerk metrics** — סף מהירות/תאוצה ל-Turn/Top כדי לצמצם false turns
* **Grip metrics** — רוחב אחיזה והשפעתו על יציבות כתף/מרפק (במוט)

---

## 🧠 דעתי המקצועית

האיפיון “נקי” ומדויק למה שנדרש בשטח:

* שימוש ב-**ROM זוויתי** הופך את המדידה לעמידה לשינויים במצלמה ולריבוי אנשים בפריים
* **הפרדת מדיניות Top לווריאנטים** מאפשרת לך לשרת מטרות שונות (כוח מול מתח/היפרטרופיה) בלי לשבור את הבסיס
* משקלי 0–2 נותנים היררכיית חשיבות ברורה, עם **Safety Caps** שמונעים ציונים גבוהים כשבטיחות נפגעת

לשימוש יומיומי — זה **אמין** ומאזן בין דיוק, פשטות ומהירות.
כשתוסיף בעתיד מדדים כמו **אגן** ו-**object_x**, הדיוק ושפע הפידבקים יעלו עוד רמה — מבלי לשנות את האופי המשפחתי.

---

אם תרצה, אכין מייד לאחר מכן את `hinge.base.yaml` על פי האיפיון הזה, ואז וריאנט ראשון: **דדליפט רגיל עם מוט** עם מדיניות “נעילה מלאה”.

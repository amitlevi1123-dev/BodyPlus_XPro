# =============================================================================
# 🧱 press.base.yaml — בסיס משפחת הלחיצות (Press Family)
# =============================================================================
# מטרה:
#   תרגילי לחיצה בפלג גוף עליון: חזה, כתפיים, שכיבות סמיכה (עם/בלי ציוד)
#   מדידה פשוטה של ROM, יציבה ושליטה בקצב.
#
# שימוש:
#   כל וריאנט (bench, incline, shoulder, pushup וכו') יורש מכאן ומגדיר:
#     parent: press.base
#     direction: upward_horizontal / upward_vertical / upward_diagonal / downward_diagonal
#     equipment: barbell / dumbbell / machine / bodyweight
#     targets: ערכים ייחודיים (כמו elbow_rom_deg)
#     top_mode: lockout / under_tension / bottom_pause
# =============================================================================

id: press.base
display_name: "תרגילי לחיצה – בסיס"
family: press
type: upper_body
version: 1.0.0

# -----------------------------------------------------------------------------
# 🧩 מטרות מדידה כלליות (ברירת מחדל)
# -----------------------------------------------------------------------------
targets:
  elbow_rom_deg: 70        # פתיחה/סגירה במרפק
  shoulder_rom_deg: 45     # תנועה במפרק הכתף
  torso_forward_max_deg: 20  # שמירה על יציבה ללא קריסה
  rep_time_s_min: 2.0
  rep_time_s_max: 5.0
  ecc_s_range: [1.0, 2.0]
  con_s_range: [1.0, 2.0]
  pause_top_s_range: [0.2, 0.5]
  pause_bottom_s_range: [0.2, 0.5]

# -----------------------------------------------------------------------------
# ⚙️ קריטריונים עיקריים
# -----------------------------------------------------------------------------
criteria:

  range_of_motion:
    label: "טווח תנועה"
    metrics: [elbow_left_deg, elbow_right_deg, shoulder_left_deg, shoulder_right_deg]
    fallback: [hands_center_y, object_y]
    rules:
      min_rom_deg: 25
      warn_if_partial: true
    messages:
      good: "תנועה מלאה ומבוקרת לאורך כל הסט."
      weak: "טווח תנועה חלקי – כדאי לפתוח מעט יותר את המרפקים או הכתפיים."
      missing: "לא זוהו נתונים לטווח תנועה."

  posture:
    label: "יציבה"
    metrics: [torso_forward_deg, spine_flexion_deg, spine_curvature_side_deg]
    rules:
      max_forward_deg: 20
      max_spine_flexion_deg: 15
      max_sidebend_deg: 10
    messages:
      good: "יציבה יציבה ונכונה לאורך כל התנועה."
      weak: "נראתה נטייה או עגילה קלה בגו – שמור גב ניטרלי."
      missing: "לא זוהו נתונים ליציבה."

  tempo:
    label: "קצב ושליטה"
    metrics: [rep.timing_s, rep.ecc_s, rep.con_s, rep.pause_top_s, rep.pause_bottom_s]
    rules:
      rep_time_range: [2.0, 5.0]
      ecc_range: [1.0, 2.0]
      con_range: [1.0, 2.0]
      pause_range: [0.2, 0.5]
    messages:
      good: "קצב מצוין — שליטה מלאה בתנועה."
      fast: "מהיר מדי — האט ושמור על שליטה."
      slow: "איטי מדי — אפשר להאיץ בעדינות."
      missing: "לא זוהה קצב ביצוע."

# -----------------------------------------------------------------------------
# 🧮 ניקוד כולל לפי תחום
# -----------------------------------------------------------------------------
scoring:
  range_of_motion: 0.4
  posture: 0.3
  tempo: 0.3
  missing_critical: "לא ניתן לחשב ציון – חסרים נתונים חיוניים."

# -----------------------------------------------------------------------------
# 📡 חישוב חזרות — מקור תנועה
# -----------------------------------------------------------------------------
rep_signal:
  primary: [elbow_left_deg, elbow_right_deg]
  fallback: [hands_center_y, object_y]
  min_change_deg: 20
  min_rep_time_s: 0.5
  max_rep_time_s: 6.0

# -----------------------------------------------------------------------------
# 🧍‍♂️ מצבי טופ (נקודת סיום לפי סוג התרגיל)
# -----------------------------------------------------------------------------
top_modes:
  lockout:
    description: "עצירה קצרה בעמידה מלאה (0.3–0.5ש׳)."
  under_tension:
    description: "ללא נעילה מלאה – שמירה על מתח בצמרת."
  bottom_pause:
    description: "עצירה קצרה בתחתית התנועה (0.3–0.5ש׳)."

# -----------------------------------------------------------------------------
# 💡 טיפים כלליים (feedback עדין, לא חובה)
# -----------------------------------------------------------------------------
hints:
  good_setup: "שמור כתפיים יציבות ומרפקים בקו התנועה."
  camera_tip: "ודא שכל פלג הגוף העליון נראה בפריים בתאורה טובה."
  breathing_tip: "נשוף בזמן הלחיצה – אל תעצור נשימה באמצע התנועה."

# -----------------------------------------------------------------------------
# 🌱 אפשרויות עתידיות (לא בשימוש כרגע)
# -----------------------------------------------------------------------------
future:
  symmetry_check: [shoulder_left_deg, shoulder_right_deg]
  head_alignment_check: [head_pitch_deg, torso_forward_deg]
  grip_width_px: optional
  bar_path_angle_from_vertical_deg: optional

# =============================================================================
# deadlift.dumbbell.romanian.yaml â€” Romanian Deadlift (RDL) ×¢× ×“×××‘×œ×™×
# × ×ª×™×‘ ××•××œ×¥:
#   exercise_library/exercises/packs/dumbbell/deadlift.dumbbell.romanian.yaml
# ××©×¤×—×”: hinge | ×•×¨×™×× ×˜: ×“×××‘×œ×™× | ×“×’×©: ×˜×•×•×— ×–×•×•×™×ª×™ (×™×¨×š/×’×•), ×©××™×¨×ª ××ª×— ×œ××¢×œ×”
# =============================================================================

id: "deadlift.dumbbell.romanian"
family: "hinge"
extends: "hinge.base"

meta:
  selectable: true
  display_name: "Romanian Deadlift â€” Dumbbells (RDL)"
  equipment: "dumbbell"
  start_mode: "from_standing"
  version: "1.0.1"
  notes: >
    RDL ×¢× ×“×××‘×œ×™× ××Ÿ ×”×¢××™×“×”: ×“×—×™×¤×ª ××’×Ÿ ×œ××—×•×¨, ×“×’×© ××§×¦× ×˜×¨×™ ×•×©××™×¨×ª ××ª×—.
    ×—×–×¨×” ××œ××” × ×¡×¤×¨×ª ×‘×”×©×œ××ª â‰¥95% ××”×¢×œ×™×™×” â€” ××™×Ÿ ×—×•×‘×” ×œ× ×¢×™×œ×” ××œ××” ×œ××¢×œ×”.
    ×©×”×™×™×” ××¨×•×›×” ××“×™ ×œ××¢×œ×” ××•×¨×™×“×” × ×™×§×•×“ (RDL ×©×•××¨ ××ª×—).
    ×¢×•××§/ROM ××—×•×©×‘×™× ××–×•×•×™×•×ª ×™×¨×š/×’×• ×•×œ× ××¤×™×§×¡×œ×™× â€” ×¢××™×“ ×œ××¨×—×§ ××¦×œ××”.
    ×›×¤×•×ª ×¨×’×œ×™×™× ×™×©×¨×•×ª (â‰ˆ0Â°) ×ª×§×™× ×•×ª â€” ××™×Ÿ ×—×•×‘×” ×œ×¡×™×‘×•×‘ ×”×—×•×¦×”.

# -----------------------------------------------------------------------------
# ğŸ§­ ×¨××–×™ ×–×™×”×•×™ ×œ××¡×•×•×’ (Classifier Hints)
#  - ××¡× ×Ÿ ×¦×™×•×“ ×—×“: ×—×™×™×‘ ×“×××‘×œ×™×; ××™×Ÿ ××•×˜/×˜×¨×¤-×‘×¨.
# -----------------------------------------------------------------------------
match_hints:
  must_have: [pose.available, objdet.object_present]
  must_not_have: [objdet.bar_present, objdet.trapbar_present]
  any_of: [objdet.dumbbell_present]
  ranges:
    objdet.object_kind: ["dumbbell"]
  pose_view: ["side", "front_left", "front_right"]
  motion_pattern: ["hip_hinge"]
  joints_focus: ["hips", "spine", "knees"]
  weight: 1.0

# -----------------------------------------------------------------------------
# ğŸ¯ ×™×¢×“×™× ×œ×•×•×¨×™×× ×˜
# -----------------------------------------------------------------------------
targets:
  # ROM ×–×•×•×™×ª×™ (×—×™×©×•×‘ ×“×œ×ª× ×–×•×•×™×•×ª ×™×¨×š/×’×•)
  rom_joint:
    hip_rom_deg: 48
    torso_rom_deg: 30

  # ×©×œ×™×˜×” ×‘×–××Ÿ ×”×—×œ×§ ×”×¢×œ×™×•×Ÿ (×œ×©××•×¨ ××ª×—; ××™×Ÿ â€œ× ×¢×™×œ×”â€ ××¨×•×›×”)
  top_time_control:
    hold_good_max_s: 0.50
    hold_ok_max_s:   1.00
    hold_hard_cap_s: 2.50

# -----------------------------------------------------------------------------
# â±ï¸ ×—×œ×•× ×•×ª ×˜××¤×• (×”×“×¨×›×ª×™×™×; ×”× ×™×§×•×“ ×‘×¤×•×¢×œ × ×§×‘×¢ ×‘Ö¾scoring)
# -----------------------------------------------------------------------------
tempo_targets:
  rep_t_s:   [1.0, 4.0]
  ecc_s:     [0.8, 3.0]
  con_s:     [0.6, 2.5]
  pause_bot: [0.0, 0.8]
  pause_top: [0.0, 1.0]

# -----------------------------------------------------------------------------
# ğŸ¦¶ ×× ×— ×¨×’×œ×™×™× (×”×›×•×•× ×”)
#  - ×¢×“×›×•×Ÿ ×—×©×•×‘: 0â€“20Â° ×ª×§×™×Ÿ (0Â° = ×›×¤×•×ª ×¨×’×œ×™×™× ×™×©×¨×•×ª ×–×” ×‘×¡×“×¨!)
# -----------------------------------------------------------------------------
stance_targets:
  stance_width_ratio: [0.85, 1.15]
  toe_angle_deg:      [0, 20]      # â† ×™×™×©×•×¨ ×§×“×™××” ××•×ª×¨ ×œ×—×œ×•×˜×™×Ÿ
  knee_toe_alignment_ok_abs_deg: 5

# -----------------------------------------------------------------------------
# ğŸ” ×”×¢×“×¤×•×ª ×¡×¤×™×¨×ª ×—×–×¨×•×ª/×¤××–×•×ª
# -----------------------------------------------------------------------------
rep_detection_hints:
  prefer_angles: true            # ×¤××–×•×ª/ROM ××–×•×•×™×•×ª ×™×¨×š/×’×•
  use_object_y_as_aux: true      # ×¢×–×¨ ×œ××¡×œ×•×œ/×™×¦×™×‘×•×ª (×’×•×‘×” ×”×“×××‘×œ×™× = ×™×“×™×™×)
  min_full_up_fraction: 0.95     # â‰¥95% ××”×¢×œ×™×™×” = ×—×–×¨×” ××œ××”
  # × ×™×ª×Ÿ ×œ×›×™×™×œ ×‘×¢×¨×•×¥ ×”×¡×™×’× ×œ ×× ×¦×¨×™×š (×œ× ×—×•×‘×”):
  # thresholds:
  #   min_rom_good: 0.22
  #   min_rep_ms: 400
  #   max_rep_ms: 6000

# -----------------------------------------------------------------------------
# âš–ï¸ ×“×¨×™×¡×•×ª × ×™×§×•×“ (scoring)
# ×”×¢×¨×”: ×©××•×ª ×”×§×¨×™×˜×¨×™×•× ×™× ×—×™×™×‘×™× ×œ×”×ª××™× ×œ×©××•×ª ×©×§×™×™××™× ×‘Ö¾hinge.base.
# ×× ×‘×‘×¡×™×¡ ×”×§×¨×™×˜×¨×™×•×Ÿ × ×§×¨× ××—×¨×ª (×œ××©×œ head_alignment ×‘××§×•× head_spine),
# ×¢×“×›×Ÿ ×›××Ÿ ×œ×©× ×”×ª×•××.
# -----------------------------------------------------------------------------
scoring:

  policy:
    missing: skip
    min_criteria_for_full_quality: 3

  criteria:

    # -------------------------
    # ×‘×˜×™×—×•×ª (×’×‘/×¨××©)
    # -------------------------
    spine_rounding:                # ×¢×’×™×œ×ª ×’×‘ (×¡×’×™×˜×œ×™)
      weight: 2.0

    lateral_bend:                  # ×¢×™×§×•× ×¦×“×“×™
      weight: 1.2

    head_spine:                    # ×¨××© ×‘×§×• ×”×’×• (×× ×‘×‘×¡×™×¡ ×–×” head_alignment â€” ×©× ×” ×œ×©× ×”×ª×•××)
      weight: 1.0

    # -------------------------
    # ×ª×‘× ×™×ª ×”×™× ×’'/×× ×™×¢×ª "×¡×§×•×•××˜"
    # -------------------------
    hinge_posture:                 # ×™×—×¡ ×’×•/×‘×¨×š â€” ×”×™× ×’' ×××™×ª×™ (×œ× ×¡×§×•×•××˜)
      weight: 1.6

    knee_flex_limit:               # ×‘×¨×š "×¤×ª×•×—×”" ×™×—×¡×™×ª â€” ×œ×× ×•×¢ ×“×¤×•×¡ ×¡×§×•×•××˜
      weight: 1.0

    # -------------------------
    # ROM ××–×•×•×™×•×ª (×§×¨×™×˜×™)
    # -------------------------
    rom_joint:
      weight: 1.8
      rule:
        kind: rom_joint_min_target
        input: { hip_rom_deg: "auto", torso_rom_deg: "auto" }
        target_hip_deg:   48
        target_torso_deg: 30
        small_rep_min:    0.30
        partial_min:      0.50
        full_up_fraction: 0.95
        clamp_full_range: [0.95, 1.00]

    # -------------------------
    # ×§×¦×‘/×©×œ×™×˜×”
    # -------------------------
    tempo:
      weight: 1.0

    phase_control:                 # ××™×›×•×ª ×”×™×¤×•×š/×¤××–×•×ª
      weight: 1.2

    turn_quality:
      weight: 0.6

    # -------------------------
    # ×¨×’×œ×™×™×/×× ×—
    # -------------------------
    knee_valgus:
      weight: 1.2

    heels_grounded:
      weight: 0.8

    stance_width:
      weight: 0.6

    # ×¢×“×›×•×Ÿ: ×œ× ×œ×”×¢× ×™×© ×¢×œ 0Â° â€” ×˜×•×•×— ×™×¢×“ 0â€“20Â° ××’×“×™×¨ "×˜×•×‘".
    toe_angle:
      weight: 0.5
      rule:
        kind: threshold_window_abs_pair
        input_left:  toe_angle_left_deg
        input_right: toe_angle_right_deg
        target_min:  0
        target_max:  20
        soft_margin: 3   # ×¢×“×™× ×•×ª ×¡×‘×™×‘ ×”×§×¦×”

    # -------------------------
    # ×¢×œ×™×•×Ÿ (×©×”×™×™×” ×œ××¢×œ×”) â€” ×©××™×¨×ª ××ª×—
    # -------------------------
    top_time_control:
      weight: 0.6
      rule:
        kind: top_hold_penalty
        input: rep.pause_top_s
        good_max_s:   0.50
        ok_max_s:     1.00
        hard_cap_s:   2.50

  # ×ª×§×¨×•×ª ×‘×˜×™×—×•×ª (Caps)
  safety_caps:
    - when: "spine_rounding <= 0.60"
      cap: 0.80
    - when: "knee_valgus   <= 0.60"
      cap: 0.90
    - when: "head_spine    <= 0.60"
      cap: 0.92

  aggregate:
    method: weighted_mean
    weights_source: inline

# -----------------------------------------------------------------------------
# ğŸ“£ ×—×™×•×•×˜ ××©×¤×˜×™× (phrases)
# -----------------------------------------------------------------------------
phrases:
  namespace: "hinge.rdl"
  inherit_common_maps: true
  maps:
    rom_joint:
      rep_short: "hinge.common.rom_joint.rep_short"
      rep_too_short: "hinge.common.rom_joint.rep_too_short"
      rep_good: "hinge.common.rom_joint.rep_good"
    turn_quality:
      rep_weak: "hinge.common.turn.rep_weak"
      rep_good: "hinge.common.turn.rep_good"
    top_time_control:
      long_hold:  "hinge.rdl.top_tension.rep_long_hold"
      too_locked: "hinge.rdl.top_tension.rep_too_locked"

# -----------------------------------------------------------------------------
# ğŸ§ª ×‘×“×™×§×•×ª ××•××œ×¦×•×ª (QA)
# -----------------------------------------------------------------------------
qa_notes:
  - "×¡×˜ ××³ ×œ×œ× ×¢×¦×™×¨×” ×œ××¢×œ×” ××•×œ ×¡×˜ ×‘×³ ×¢× 2â€“3s ×¢×¦×™×¨×”: ×‘×³ ×¦×¨×™×š ×œ×¨×“×ª ×“×¨×š top_time_control."
  - "×‘×“×•×§ ×©×—×–×¨×•×ª ×¢× 95â€“100% ×¢×œ×™×™×” × ×—×©×‘×•×ª ××œ××•×ª (×œ×œ× ×§×¤×™×¦×” 99â†’100)."
  - "×•×“× ×©-ROM ××–×•×•×™×•×ª ×¢×•×‘×“ ×–×”×” ×××¨×—×§×™ ××¦×œ××” ×©×•× ×™×."
  - "×•×“× ×©×”×§×¨×™×˜×¨×™×•× ×™× ×©×œ ×”×™× ×’' (hinge_posture/knee_flex_limit) ××•× ×¢×™× '×¡×§×•×•××˜'."
  - "×¢×’×™×œ×ª ×’×‘ ××—××™×¨×”: spine_rounding<0.60 ××¤×¢×™×œ cap=0.80 ×¢×œ ×¦×™×•×Ÿ ×”×¡×•×¤×™."

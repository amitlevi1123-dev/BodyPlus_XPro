נכון מאוד — מצוין שציינת את זה 👏
במקרה של **כפיפות מרפקים עם מוט**, הנוכחות של המוט היא **חובה** לזיהוי מדויק של התרגיל, לא “nice-to-have”. לכן נתקן את זה ל־`must_have: [pose.available, objdet.bar_present]`.

להלן **האיפיון המעודכן והמלא** בצורה ברורה, נוחה לקריאה וללא קוד.
אחריו אשלח את גרסת הקוד (`curl.barbell.yaml`) בנפרד.

---

# 🏋️‍♂️ כפיפות מרפקים עם מוט (Barbell Curl) — איפיון מלא

## 🎯 מטרת התרגיל

מדידה וניקוד של כפיפות מרפקים בעמידה עם מוט, תוך דגש על **שליטה בתנועה** ו־**ביצוע בטיחותי**:
ללא סווינגים, ללא הרמת כתפיים, תוך שמירה על קצב אחיד וברכיים רכות ליציבות.

---

## ⚙️ עקרונות מדידה

* המערכת מזהה את גוף המתאמן (`pose.available`) ואת נוכחות המוט (`objdet.bar_present`).
* עיקר הניתוח מבוסס על **זוויות המרפק**, **תנועת הגו**, ו־**תזוזת הכתפיים**.
* התנועה נמדדת כאשר יש **כיפוף והארכה במרפק** בלבד — שאר הגוף אמור להישאר יציב.
* כיפוף קל בברכיים משפר שיווי משקל ויציבות — ומזכה בבונוס קטן.

---

## 📋 תנאים למדידה (חובה)

| תנאי                   | תיאור                                          |
| ---------------------- | ---------------------------------------------- |
| ✅ `pose.available`     | הגוף מזוהה באופן תקין בפריים                   |
| ✅ `objdet.bar_present` | זוהה מוט באופן ברור (אם אין — התרגיל לא ייספר) |
| ✅ שינוי זווית מרפק     | ירידה של לפחות 7° לאורך 120ms ומעלה            |
| 🚫 ללא סווינג חזק      | גו יציב, אין תנודות חדות קדימה/אחורה           |
| 🚫 ללא הרמות כתף       | הכתפיים לא משתתפות באופן משמעותי בתנועה        |

---

## 🔄 מבנה החזרה (Rep Flow)

| שלב                    | תיאור                                                          |
| ---------------------- | -------------------------------------------------------------- |
| **Ready (התחלה)**      | מרפקים כמעט ישרים (175°), כתפיים מעליהם, גב זקוף, ברכיים רכות. |
| **התחלת תנועה**        | ירידה של ≥7° במרפק, רציפה לפחות 120ms.                         |
| **כיוון שינוי (Turn)** | מזוהה רק לאחר 100ms רצף כדי למנוע ספירות שגויות.               |
| **סיום חזרה**          | מרפק חוזר ל־170° או עצירה קלה (0.2–0.5 שנ׳) בחלק העליון.       |
| **זמני יעד**           | בין 0.7 ל־2.5 שניות לחזרה תקינה. פחות מ־0.5 שנ׳ נחשב מהיר מדי. |
| **עצירה תחתית ארוכה**  | מעל 0.6 שנ׳ בתחתית תוריד ציון (מוריד עומס על השריר).           |

---

## 🧭 יעדי איכות

| תחום             | יעד תקין               | מה נחשב בעייתי               |
| ---------------- | ---------------------- | ---------------------------- |
| **ROM מרפק**     | 85–95° כיפוף           | פחות מ־70° → קצר מדי         |
| **טמפו**         | 0.7–2.5 שנ׳            | <0.5 שנ׳ מהיר מדי            |
| **שליטה בתנועה** | היפוך נקי ללא bounce   | קפיצה/טלטול = הורדה          |
| **גו (סווינג)**  | תנועה יציבה            | סווינג בולט → הורדה חריפה    |
| **כתפיים**       | יציבות (זרוע כציר)     | הרמה קדימה → הורדה חדה       |
| **שורש כף היד**  | ניטרלי                 | כיפוף/סטייה חזקה → הורדה קלה |
| **ברכיים**       | רכות                   | נעילה מלאה → הורדה קלה       |
| **רוחב אחיזה**   | סביב כתפיים (0.9–1.2×) | רחב/צר מדי → הערה קלה        |

---

## 🧮 חלוקת ניקוד (סה״כ 10 נקודות)

| קריטריון                | משקל | חשיבות                    |
| ----------------------- | ---- | ------------------------- |
| **גו ללא סווינג**       | 2.2  | הכי חשוב לבטיחות ושליטה   |
| **יציבות כתפיים**       | 2.0  | קריטי למניעת עומס מיותר   |
| **טמפו**                | 1.8  | שליטה על קצב החזרה        |
| **שליטה בהיפוך (Turn)** | 1.6  | מונע “באונס” בתחתית       |
| **ROM מרפק**            | 1.0  | מדד משני בתרגיל זה        |
| **ברכיים רכות**         | 0.5  | משפר יציבות, מעניק בונוס  |
| **רוחב אחיזה**          | 0.5  | סביב רוחב כתפיים          |
| **שורש כף היד ניטרלי**  | 0.4  | מניעת עומס על שורש כף היד |

---

## ⚠️ ענישות מיוחדות

| מצב                            | השפעה על הציון |
| ------------------------------ | -------------- |
| עצירה ארוכה בתחתית (מעל 0.6ש׳) | הורדת ציון קלה |
| חזרה מהירה מדי (<0.5ש׳)        | הורדה משמעותית |
| סווינג חזק בגו                 | תקרת ציון 0.85 |
| הרמות כתף משמעותיות            | תקרת ציון 0.88 |
| גב מתעגל                       | תקרת ציון 0.90 |

---

## 🧩 מדדים רלוונטיים (מפתחות aliases)

| תחום        | מדדים עיקריים                                                                                   |
| ----------- | ----------------------------------------------------------------------------------------------- |
| מרפקים      | `elbow_left_deg`, `elbow_right_deg`                                                             |
| כתפיים      | `shoulder_left_deg`, `shoulder_right_deg`                                                       |
| גו          | `torso_forward_deg`, `torso_forward_vel_deg_s`, `torso_forward_acc_deg_s2`, `spine_flexion_deg` |
| שורש כף היד | `wrist_flex_ext_*`, `wrist_radial_ulnar_*`                                                      |
| חזרות       | `rep.timing_s`, `rep.ecc_s`, `rep.con_s`, `rep.pause_top_s`, `rep.pause_bottom_s`               |
| ציוד        | `objdet.bar_present`                                                                            |
| רוחב אחיזה  | `shoulders_width_px` (+ עתידי `grip_width_px`)                                                  |

---

## 💬 הודעות פידבק לדשבורד

| קטגוריה         | דוגמה להודעה                                         |
| --------------- | ---------------------------------------------------- |
| **סווינג**      | “נראתה תנודה בגו — שמור גב יציב.”                    |
| **כתף**         | “המרפקים צריכים להישאר מתחת לכתפיים — אל תרום בכתף.” |
| **מהירות יתר**  | “הקצב היה מהיר מדי — האט ושמור שליטה.”               |
| **עצירה תחתית** | “עצירה ארוכה מדי בתחתית — הפחת עומס.”                |
| **ברכיים**      | “שמור ברכיים רכות — שיווי משקל טוב יותר.”            |
| **רוחב אחיזה**  | “האחיזה צרה/רחבה מדי — שמור סביב רוחב כתפיים.”       |
| **שורש כף היד** | “כף היד נוטה — יישר מעט לשיפור שליטה.”               |

---

## 🧱 שיפורים עתידיים

1. **נתיב אובייקט (Object Path):** מעקב אחרי תנועת המוט (`object_x`, `bar.y_px`) כדי לזהות סווינג מדויק.
2. **מדד “Shoulder Drift”:** כמות תנועה של הכתף לעומת המרפק לציון גניבה מהכתף.
3. **מדידת רוחב אחיזה אמיתי:** `grip_width_px` להשוואה ישירה עם רוחב הכתפיים.
4. **Adaptive Tempo:** התאמת קצב מומלץ לפי רמת המשתמש.
5. **דוח עקביות סט:** ניתוח הבדלים בין חזרות באותו סט (ROM, קצב, יציבות).

---

רוצה שאשלח עכשיו את קובץ ה־YAML (`curl.barbell.yaml`) המבוסס על האיפיון הזה?

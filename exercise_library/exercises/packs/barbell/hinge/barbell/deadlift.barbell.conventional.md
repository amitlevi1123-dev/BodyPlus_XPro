
# 🧠 דדליפט רגיל עם מוט — איפיון מלא (Variant Spec)

## 🎯 מטרה

להגדיר ווריאנט “דדליפט קונבנציונלי עם מוט” מעל משפחת **Hinge** כך שיתמקד ב:

* הרמה מהרצפה (start_mode: `from_floor`)
* גב ניטרלי, תבנית הינג’ ברורה (לא סקוואט)
* **נעילה מלאה עם עצירה קצרה מאוד למעלה** (ציון מלא רק כשזה מתקיים)
* ROM מדוד מזוויות ירך/גו (לא פיקסלים)
* קצבי תנועה תקינים ושליטה בהיפוך/נעילה
* יישור ברך־כף־רגל, עקבים נוגעים, וסימטריה בסיסית

---

## 🧭 זיהוי ווריאנט (Classifier Intent)

* ציוד נדרש: `barbell`
* תבנית תנועה: `hip_hinge`
* מצב פתיחה: `from_floor`
* זווית צילום מועדפת: צד/אלכסון קדמי (side / front-left / front-right)
* אותות עזר: `object_y` (גובה מוט), `hands_center_y` (גיבוי), `hip_y_px` (חירום)

**פסילות מהירות (כשהן ברורות):**

* אין `pose.available`
* לא מזוהה `barbell` לאורך רוב הסט
* דפוס “סקוואט” מובהק (ברך נסגרת עמוק מדי ביחס להטיית גו)

---

## 🧩 פאזות מותאמות ל־From Floor

רצף:

1. **Setup בתחתית** – מוט נוגע/קרוב לרצפה, עקבים במגע, גב ניטרלי, אחיזה יציבה
2. **Concentric (Lift)** – הרמה רציפה, ירידה הדרגתית ב־`torso_forward_deg`, עליית ירך
3. **Top / Lockout (Hold קצר)** – עמידה מלאה, החזקת נעילה קצרה מאוד לאימות
4. **Eccentric (Descent)** – ירידה מבוקרת בחזרה לקרקע
5. **Touch & Reset** – מגע קרקע/נגיעה יציבה, בלי “קפיצה”

**זיהוי פאזה:** בעיקר מ־`torso_forward_deg` ו־זוויות הירך; `object_y` מחזק מסלול אנכי ומגע קרקע.

---

## 📐 ROM — זוויות בלבד

* **ROM ירך**: הבדל בין מקסימום ומינימום זווית ירך (ממוצע/מקס R/L)
* **ROM גו**: הבדל בין מקסימום ומינימום `torso_forward_deg`
* **ציון ROM שמרני**: היחס הגרוע מבין השניים מול יעד (מינימום):

  * `rom_joint_ratio = min( hip_rom_deg / target_hip_deg , torso_rom_deg / target_torso_deg )`
  * `rom_joint_score = clamp(rom_joint_ratio, 0..1)`

**יעדים לווריאנט:**

* `target_hip_deg ≈ 62°`
* `target_torso_deg ≈ 36°`

**ספי ספירה:**

* `< 0.30` → לא נספר (קצר מדי)
* `0.30–0.50` → נספר כ“חלקי” (ענישה מתונה + דגל `short`)
* `≥ 0.50` → תקין, כפוף לשאר הקריטריונים

---

## ✅ מדיניות נעילה (Full Lockout Policy)

**מטרה:** ציון מלא רק עם נעילה מלאה ואימות קצר למעלה.

**תנאי Lockout מלאים:**

* עצירה למעלה: `pause_top ≥ 0.30s`
* גב ניטרלי: `spine_flexion_deg ≤ 10°`
* ראש בקו: `|head_pitch_deg - torso_forward_deg| ≤ 10°`
* גו כמעט זקוף: `torso_forward_deg ≤ 15°`
* עקבים במגע: `heels_grounded = true`

**השפעה על ציון:**

* עומד בכל התנאים → נעילה = 1.00 (אין הורדה)
* “כמעט נעילה” (0.15–0.29s, שאר תנאים תקינים) → נעילה = 0.85
* בלי עצירה אך תנאים יציבתיים תקינים → נעילה = 0.70
* הפרת בטיחות/יציבה בטופ → נעילה ≤ 0.50 (לפי חומרה)

**חיבור לסך־הכל:**
הנעילה פועלת כמכפיל רך על ציון הליבה של החזרה:

* `rep_score = rep_core * (0.5 + 0.5 * lockout_multiplier)`
* כך חזרה טובה אך בלי נעילה מלאה אינה “נמחקת”, אבל לא מקבלת ציון מלא.

**התראות (להוסיף אחר כך ל־phrases):**

* לכל חזרה ללא נעילה מלאה: “נעילה לא הוחזקה — החזק 0.3–0.5 שניות בעמידה מלאה.”
* אם **החזרה האחרונה בסט** לא נסגרה: הודעת סט ייעודית.

---

## 🧠 קריטריונים (מה מודדים)

### קריטיים (בלעדיהם אין ציון כולל)

* `pose.available`
* `spine_flexion_deg`
* `torso_forward_deg`
* `hip_left_deg` + `hip_right_deg` (ל־ROM זוויתי)
* אות עזר לפאזות/ספירה: אחד מ־`object_y`/`hands_center_y`/`hip_y_px`
* אותות Top לנעילה (כדי להחיל את המכפיל): `rep.pause_top_s` + יציבה בטופ

### בטיחות

* **spine_rounding**: ≤10° טוב; 10–25° בינוני; ≥35° גרוע
* **lateral_bend**: ≤5° טוב; 5–10° בינוני; ≥20° גרוע
* **head_spine**: |Δ| ≤10° טוב; 10–20° בינוני; ≥25° גרוע

### תבנית Hinge (לא סקוואט)

* **hinge_posture**: יחס גו/ברך מעיד על הינג’ (ברך פתוחה יחסית, גו מוטה קדימה)
* **knee_flex_limit**: יעד ברך “פתוחה” ~100–115° (להבדיל מסקוואט עמוק)

### ROM זוויתי

* לפי הסעיף לעיל (יעדים ייעודיים לווריאנט)

### קצב ושליטה

* **Tempo (כולל):** 1.2–4.0s
* **Eccentric:** 0.8–3.0s
* **Concentric:** 0.6–2.5s
* **Pause-Bottom:** 0.0–0.8s (סט־אפ קצר מותר)
* **Pause-Top:** 0.30–1.0s (לנעילה מלאה)

### רגליים/מנח

* stance_width_ratio: 0.85–1.15
* toe_angle: 5–20°
* knee_toe_alignment: |Δ| ≤5°
* heels_grounded & full foot contact

### איכות שינוי כיוון/מסלול

* **turn_quality:** היפוך נקי, ללא “קפיצה” (jerk) מוגזמת
* **bar path (עזר):** `object_y` יציב ואנכי יחסית (לא חובה לניקוד, שימושי לפידבק עתידי)

---

## ⚖️ משקלי ניקוד (0–2)

* בטיחות: spine_rounding **2.0**, lateral_bend 1.4, head_spine 1.2
* תבנית הינג’: hinge_posture **1.8**, knee_flex_limit 1.0
* ROM זוויתי: **1.5**
* שליטה/קצב: phase_control **1.5**, tempo 1.0, phase_balance 0.8
* רגליים/מנח: knee_valgus **1.4**, heels_grounded 1.0, stance_width 0.8, toe_angle 0.6
* איכות היפוך/טופ: turn_quality 0.5, **lockout hook 1.0** (מומר למכפיל)

**Safety Caps (בסיום):**

* safety_score < 0.6 → cap 0.85
* knee_valgus גרוע → cap 0.90

---

## 🔁 ספירת חזרות (Rep Counting)

* תנאי ספירה: `rom_joint_ratio ≥ 0.30` + עמידה בתנאי בטיחות מינימליים
* חזרות 0.30–0.50 נספרות “חלקיות” עם הורדה
* ספירה נשענת על זוויות (turn בפאזות); `object_y` מחזק “מגע קרקע” ב־Setup/Reset

---

## 🔍 Edge Cases שכדאי לטפל/לבדוק

* “הדפלקט” ברכיים (ברך ננעלת אחורה) בלוק־אאוט → לפיקוח עתידי (pelvis/hip lock)
* Bounce בקרקע (נגיעה וקפיצה) → הורדה ב־turn_quality/tempo
* מוט “מתרחק מהגוף” → לעתיד דרך `object_x`
* שני אנשים בפריים → השפעה מינימלית בזכות ROM זוויתי (לא פיקסלים), אך נדרש `pose.available` יציב

---

## 📣 פידבק (שיוסף בהמשך ל־phrases)

* “נעילה לא הוחזקה — החזק 0.3–0.5 שניות בעמידה מלאה.”
* “טווח חלקי — הגדל כיפוף ירך (יעד ~{{target_hip_deg}}°) או הטיית גו (יעד ~{{target_torso_deg}}°).”
* “קריסה פנימה של הברכיים — שמור ברך בקו האצבעות.”
* “היפוך חד — האט מעט בתחתית ושמור שליטה.”
* “עקבים התרוממו — שמור עקבים נעוצים.”

---

## 🧪 QA מומלץ לפני קוד

* סט קצר (5–8 חזרות) מזווית צד וזווית אלכסון קדמי
* שתי גרסאות: עם עצירה קצרה בטופ ובלי עצירה — לבדוק הפרשי ניקוד
* חזרה אחרונה בכוונה בלי נעילה מלאה — לאמת קבלת התראה ברמת הסט
* וידוא ש־ROM זוויתי מזהה עומק תקין גם אם המצלמה קרובה/רחוקה

---

## 🚀 הצעות שיפור עתידיות (Roadmap)

* **pelvis_tilt/rotation** — גילוי היפראקסטנשן/נפילת אגן בלוק־אאוט
* **object_x** — bar path אופקי להדרכה “בר קרוב לגוף”
* **Symmetry indices** — הפרשי עומק/מהירות בין R/L
* **Adaptive targets** — יעד ROM/טמפו לפי אנתרופומטריה
* **Phase jerk metrics** — הגנת Turn/Top לפי מהירות/תאוצה מזוויות
* **Grip metrics** — רוחב אחיזה כגורם מסייע ליציבות כתף/מרפק

---

## 🧠 דעתי המקצועית

האיפיון מתאים למטרת **דדליפט כוח תקני**:

* ROM מזוויות + נעילה מאומתת עם **עצירה קצרה** נותנים **דיוק ואמינות** בלי תלות בפיקסלים.
* “כמעט נעילה” לא נענשת בחומרה (לא נמחקת), אך גם לא מקבלת ציון מלא—מעודד טכניקה תקנית.
* Safety Caps מונעים “לעגל פינות” כשיש כשל יציבתי.
* יש מסלול הרחבה ברור (אגן, bar path, סימטריה).

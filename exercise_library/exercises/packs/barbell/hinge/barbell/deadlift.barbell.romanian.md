# 🧠 איפיון מלא — Romanian Deadlift (RDL) עם מוט

**ID מוצע:** `deadlift.barbell.romanian`  · **משפחה:** `hinge`  · **start_mode:** `from_standing`  · **equipment:** `barbell`

> הערה: אם תרצה מזהה לא תקני כמו `romenian.deadlif.barbel`, אפשר להוסיף אותו כ־alias ב־`aliases.yaml` ולשמור את ה־ID הקנוני כמתואר כאן.

---

## 🎯 מטרת הווריאנט

* דדליפט רומני (RDL) עם מוט, נקודת פתיחה בעמידה (לא מהרצפה).
* דגש על **תבנית הינג’**: כיפוף ירך + הטיית גו, **כמעט ללא סקווט** (ברך נשארת “פתוחה”).
* **טווח תנועה (ROM) הוא קריטי** ונמדד מזוויות הירך והגו בלבד (חסין מרחק מצלמה).
* **ספירת חזרה מלאה**: הגעה ל־**≥95%** מטווח העלייה (לא נדרשת “נעילה” מלאה כמו בקונבנציונלי).
* **שהייה ארוכה מדי למעלה מורידה ניקוד** (שומרים מתח רציף, לא “עמידה”).
* **בטיחות הגב** (עגילה) מודגשת יותר מתצורות אחרות.

---

## 🧭 זיהוי ווריאנט (Classifier)

| כלל                | פירוט                                                                                                                           |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------- |
| ציוד               | `equipment=barbell` (מומלץ גם `any_of: [objdet.bar_present, objdet.object_present]` + `ranges.objdet.object_kind: ["barbell"]`) |
| תבנית תנועה        | `motion_pattern: ["hip_hinge"]`                                                                                                 |
| זווית צילום מועדפת | `["side","front_left","front_right"]`                                                                                           |
| פסילות מהירות      | אין `pose.available`; דפוס “סקוואט” מובהק (ברך נסגרת עמוק יחסית לגו); ציוד לא עקבי לאורך רוב הסט                                |

---

## 🧩 פאזות (From Standing)

1. **Setup בעמידה** – מוט באחיזה, גב ניטרלי.
2. **Eccentric (ירידה)** – דחיפת אגן לאחור, עליית `torso_forward_deg`, זווית ירך נסגרת.
3. **Bottom (תחתית נשלטת)** – עומק לפי יעדי ROM (לא חייב מגע רצפה).
4. **Concentric (עלייה)** – פתיחת ירך, ירידת `torso_forward_deg`.
5. **Top (קצר, תחת מתח)** – הגעה ל־≥95% מהעלייה; **שהייה ארוכה מדי תעניש**. לא “נעילה” מלאה כמו DL קונבנציונלי.

> זיהוי פאזות נשען על זוויות ירך/גו. `object_y` משמש רק כעזר למסלול, לא לציון.

---

## 📐 ROM — הגדרה, יעדים וספירה

**עקרון:** ROM שמרני מזוג זוויות: ירך + גו.
נחשב יחס לפי היעד הנמוך מבין השניים.

* **יעדי ROM לווריאנט (מומלץ):**

  * `target_hip_rom_deg ≈ 48°`
  * `target_torso_rom_deg ≈ 30°`
* **חישוב יחס שמרני:**
  [
  \text{rom_joint_ratio}=\min\left(\frac{\text{hip_rom_deg}}{48},\ \frac{\text{torso_rom_deg}}{30}\right)
  ]
* **ספי ספירה:**

  * `< 0.30` → לא נספר (חזרה קצרה מדי)
  * `0.30–0.50` → נספר “חלקי” (דגל `short` + הורדה)
  * `≥ 0.50` → תקין (כפוף לשאר הקריטריונים)
* **הגדרת “חזרה מלאה” ל־RDL:**

  * **תחתית:** עומק עומד ביעד (ע״פ היחס לעיל).
  * **עלייה:** **השלמת ≥95%** מטווח העלייה (בלי דרישת “נעילה מלאה”).
  * **שהייה למעלה:** שהייה ממושכת (למשל >1.0–1.5s) **מורידה ניקוד** (RDL שומר מתח, לא עמידה).

> הערת מומחה: RDL מבצע טווח אקצנטרי מודגש ושומר **מתח רציף**; “עמידה” מלאה למעלה שובר את המתח ולכן מנוקדת מטה.

---

## 🔒 בטיחות ותבנית Hinge (לא סקוואט)

* **עגילת גב (spine_flexion_deg)**: מודגש יותר (סיכון).
* **Hinge Ratio / Knee Flex:**

  * **ברך “פתוחה”**: `min(knee_left/right_deg) ≥ 100–115°` (כלומר אין סקווט עמוק).
  * **תבנית הינג’**: הטיית גו יחסית לברך, בלי “ברך קדימה” מוגזמת.

---

## ✅ קריטריונים קריטיים (ללא אלו אין ציון)

| קטגוריה          | מפתח (קנוני)                                          | למה זה קריטי                |
| ---------------- | ----------------------------------------------------- | --------------------------- |
| פוזה             | `pose.available`                                      | חייבים שלד יציב למדידה      |
| גב               | `spine_flexion_deg`                                   | בטיחות—עגילה מסוכנת         |
| גו               | `torso_forward_deg`                                   | תבנית הינג’ + ROM           |
| ירך              | `hip_left_deg`, `hip_right_deg`                       | חישוב ROM זוויתי            |
| סיגנל עזר לפאזות | לפחות אחד: `object_y` / `hands_center_y` / `hip_y_px` | עזר ליציבות הפאזות/ספירה    |
| “טופ” RDL        | `rep.pause_top_s`                                     | לקנוס שהייה ארוכה מדי למעלה |

---

## ⚖️ ניקוד — משקלים (0–2) + כללים

> **הדגשות לפי בקשתך**:
>
> 1. ROM קריטי (גבוה)
> 2. בטיחות גב מעט **יותר** מודגשת
> 3. אין דרישת “נעילה מלאה”; **95%** עלייה מספיק, אבל **עמידה ארוכה למעלה מורידה**

### משקלים (0–2)

| תחום                | קריטריון                             |    משקל |
| ------------------- | ------------------------------------ | ------: |
| **בטיחות**          | **spine_rounding** (עגילת גב)        | **2.0** |
|                     | lateral_bend                         |     1.2 |
|                     | head_alignment (ראש-גב)              |     1.0 |
| **תבנית Hinge**     | hinge_posture                        |     1.6 |
|                     | knee_flex_limit (להימנע מסקווט)      |     1.0 |
| **ROM**             | **rom_joint (Hip/Torso)**            | **1.8** |
| **קצב/שליטה**       | tempo (כולל)                         |     1.0 |
|                     | phase_control (ecc/con/pause_bottom) |     1.2 |
| **רגליים/מנח**      | knee_valgus                          |     1.2 |
|                     | heels_grounded                       |     0.8 |
|                     | stance_width                         |     0.6 |
|                     | toe_angle                            |     0.5 |
| **איכות היפוך/טופ** | turn_quality                         |     0.6 |
|                     | **top_time_control** (שהייה למעלה)   | **0.6** |

### כללים תפעוליים עיקריים

* **ROM (קריטי):**

  * ציון ROM = `clamp(rom_joint_ratio, 0…1)`; “חזרה מלאה” דורשת גם **≥95%** מעלייה.
  * **אין “קפיצות” בין 99% ל־100%** — יש אזור “טולרנס מלא” (95–100%) כדי לא להעניש סטיות מדידה קטנות.
* **Top (RDL):**

  * `rep.pause_top_s ≤ 0.5s` → אידאלי (שומר מתח).
  * `0.5–1.0s` → עדיין טוב.
  * `>1.0s` → **הורדה ליניארית מתונה** עד גבול (למשל 2.5s).
  * `>2.5s` → **קנס ברור** (איבוד מתח).
* **Tempo/Phase:** חלונות יעד רכים (תיעוד להדרכה), הניקוד בפועל דרך הקריטריונים.

---

## 🧯 תקרות בטיחות (Safety Caps)

| תנאי                            | Cap על ציון החזרה      |
| ------------------------------- | ---------------------- |
| **spine_rounding_score < 0.60** | **×0.80** (מחמיר יותר) |
| knee_valgus_score < 0.60        | ×0.90                  |
| head_alignment_score < 0.60     | ×0.92                  |

> התקרות לא “מוחקות” עבודה טובה בתחומים אחרים — רק מגבילות את התקרה מתוך שיקולי בטיחות.

---

## 🦶 מנח רגליים (הכוונה)

| פרמטר                       | טווח מומלץ                             |
| --------------------------- | -------------------------------------- |
| stance_width_ratio          | 0.85–1.15                              |
| toe_angle_deg               | 5–20° (קדימה/פישון קל – גם קדימה “OK”) |
| knee_toe_alignment          | |Δ| ≤ 5°                               |
| heels_grounded/foot_contact | רציף                                   |

---

## 🔁 ספירת חזרות (Rep Detection)

| כלל                     | ערך                                    |
| ----------------------- | -------------------------------------- |
| מקור                    | זוויות ירך/גו (פאזות), `object_y` לעזר |
| min_rom_fraction לספירה | **0.30**                               |
| small_rep_threshold     | 0.50 (נספר חלקי)                       |
| חזרה מלאה               | עומק עומד ביעד + **עלייה ≥95%**        |

---

## 📣 פידבק (חיווט ל־phrases)

* **ROM קצר:** “טווח חלקי — הגדל כיפוף ירך/הטיית גו (יעד ~48°/~30°).”
* **שהייה ארוכה למעלה (RDL):** “עמידה ממושכת למעלה — שמור מתח רציף, קטע את העצירה.”
* **עגילת גב:** “נמדדה עגילה בגב: {{spine_flexion_deg}}°. עצור לפני הקריסה ושמור ניטרליות.”
* **Hinge vs Squat:** “שמור ברך ‘פתוחה’ והעבר אגן אחורה — הינג’ ולא סקוואט.”
* **עקבים/קשר קרקע:** “עקבים התרוממו — שמור עקבים נעוצים; משקל מעט אחורה.”

> ב־`phrases.yaml` השתמש במרחב שמות: `hinge.rdl.*` (בדומה ל־`hinge.conventional`).

---

## 🔬 QA קצר לפני קוד

* סט מזווית צד + אלכסון קדמי, 6–8 חזרות.
* סט א’ — ללא עמידה למעלה; סט ב’ — עמידה ∼2–3s למעלה → ודא שהציון ב’ ירד דרך `top_time_control`.
* חזרות “95% עלייה” נספרות **מלא** (ללא “קפיצה” בין 99%→100%).
* ROM מזוויות עובד זהה כשהמצלמה רחוקה/קרובה.
* אין “סקוואט”: knee_flex_limit נשמר; hinge_posture תקין.

---

## 📈 תקציר נוסחת ציון (מושגי)

1. **rep_core = weighted_mean(כל הקריטריונים הזמינים)**
2. **החלת Safety Caps** (אם תנאי בטיחות גרועים)
3. **top_time_control**: הורדה רכה לפי `rep.pause_top_s` (RDL בלבד)
4. **rep_score ∈ [0..1]**

> בטווח פרויקט אפשר להמיר ל־0..100 או להשאיר 0..1. משקלים מוגדרים 0–2, אך ממוצע מנורמל.

---

## 🧠 למה זה מקצועי ונכון ל־RDL?

* **RDL ≠ קונבנציונלי**: אין דרישת “נעילה” מלאה — הדגש הוא **שימור מתח**.
* **ROM מזוויות** חסין מרחק מצלמה ומיקום — אמין לאימון בית/חדר כושר.
* **95% עלייה** מאפשר טולרנס מדידה ומונע “תפירה” על 100% מדויק.
* **עגילת גב מוגדשת** (2.0) — עדיפות בטיחות.
* **קנס “עמידה”** מונע נטייה להחזיק למעלה (נוגד את עקרון ה־RDL).

---

## 🚀 שיפורים עתידיים

* **pelvis tilt/rotation** בטופ — זיהוי היפראקסטנשן/נפילת אגן.
* **object_x** (מסלול אופקי של המוט) — “קרב את המוט לגוף”.
* **סימטריה**: מדדי הבדלי עומק/מהירות בין ימין/שמאל.
* **Adaptive targets** לפי פרופורציות גוף (גובה/אורך ירך).
* **Phase jerk metrics** — איכות היפוך/טופ לפי מהירות/תאוצה מזוויות.
* **Grip width** — בדיקה אינפורמטיבית, לא ענישה בשלב ראשון.

---

## 🧷 מפתחות עיקריים (לשימוש ב־YAML)

* `meta`: `id="deadlift.barbell.romanian"`, `family="hinge"`, `equipment="barbell"`, `start_mode="from_standing"`.
* `match_hints`: כמפורט לעיל.
* `criteria`: `spine_rounding`, `lateral_bend`, `head_alignment`, `hinge_posture`, `knee_flex_limit`, `rom_joint`, `tempo`, `phase_control`, `knee_valgus`, `heels_grounded`, `stance_width`, `toe_angle`, `turn_quality`, `top_time_control`.
* `critical`: כמפורט בטבלת הקריטיים.
* `weights`: לפי הטבלה (0–2).
* `scoring_logic`/`safety_caps`: כפי שמתואר בפרקים הרלוונטיים.
* `rep_detection`: `min_rom_fraction=0.30`, `small_rep_threshold=0.50`, וכלל 95% לעלייה.

---

אם זה יושב לך טוב — אגבש מיד לקובץ YAML מלא תואם (`deadlift.barbell.romanian.yaml`) עם כל השדות, כולל מפות `phrases` וערכי ברירת־מחדל תואמים.

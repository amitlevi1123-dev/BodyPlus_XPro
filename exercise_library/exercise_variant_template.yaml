# -*- coding: utf-8 -*-
# ===================================================================
# 🏋️ exercise_variant_template.yaml — תבנית לווריאנט תרגיל במשפחה
# ===================================================================
# תפקיד: להגדיר "תרגיל ספציפי" שיורש את חוקי המשפחה (base) ומוסיף:
#  • ציוד (meta.equipment)
#  • רמזי זיהוי למסווג (match_hints)
#  • התאמות scoring ממוקדות (אם צריך)
#  • (אופציונלי) איתות חזרות שונה (rep_signal)
#
# היכן לשים?
# exercise_library/exercises/packs/<pack>/<family>/<exercise_id>.yaml
# לדוגמה:
#   packs/bodyweight/squat/squat_bodyweight.yaml
#   packs/dumbbell/squat/squat_dumbbell.yaml
#   packs/barbell/squat/squat_barbell.yaml
# ===================================================================

# מזהה ייחודי לתרגיל
id: <family>.<variant>                  # דוגמה: squat.bodyweight

# שם המשפחה
family: <family>                        # דוגמה: squat

# ירושה מהקובץ הבסיסי של המשפחה
extends: <family>.base                  # דוגמה: squat.base

meta:
  selectable: true                      # וריאנט נבחר בפועל
  display_name: "<Nice Name>"           # דוגמה: "Bodyweight Squat"
  equipment: "<none|dumbbell|barbell|kettlebell>"  # חשוב: באנגלית

# -------------------------------------------------------------------
# 🧭 רמזי זיהוי למסווג (זה מה שמאפשר "זה התרגיל הזה")
# -------------------------------------------------------------------
# • must_have: מפתחות שחייבים להיות truthy ב־payload (קנוני לפי aliases.yaml)
# • must_not_have: אם אחד מהם truthy → המועמד נפסל
# • any_of: מספיק שאחד truthy כדי לקבל נק' התאמה
# • ranges: טווחים נומריים שמאפיינים את התרגיל (לא חובה)
# • pose_view: זוויות מצלמה תקפות ("front","front_left","front_right"…)
# • weight: אם יש כמה מועמדים קרובים, אפשר לחזק/להחליש את הווריאנט
match_hints:
  must_have: [pose.available]
  must_not_have: []
  any_of: []
  ranges: {}
  pose_view: ["front", "front_left", "front_right"]
  weight: 1.0

# -------------------------------------------------------------------
# ⚖️ דריסות scoring (אופציונלי) — רק אם צריך לשנות מה־base
# -------------------------------------------------------------------
# הנוסח מתיישר למבנה scoring של ה־base:
# scoring:
#   policy: ...           # נדיר שצריך לגעת
#   criteria:
#     <criterion_name>:
#       weight: <float>   # שינוי משקל
#       rule:             # שינוי כלל (ספים/קלט שונה/כיוון)
#         kind: ...
#         input: ...
#         ...
#   safety_caps: [...]    # אם צריך קאפ נוסף/שונה (זהיר!)
#   aggregate: ...        # בד"כ לא משנים
scoring:
  criteria:
    # דוגמה 1: התאמת עומק — (לא חובה, רק אם רוצים לשנות ספים)
    # depth:
    #   rule:
    #     kind: threshold_window
    #     input: "min(knee_left_deg, knee_right_deg)"
    #     target_max: 90
    #     cutoff_max: 150
    #     direction: lower_is_better

    # דוגמה 2: העלאת משקל לטמפו בווריאנט מסוים
    # tempo:
    #   weight: 0.7

    # דוגמה 3: החלפת קלט עומק (לתרגיל עליון, למשל מרפקים במקום ברכיים)
    # depth:
    #   rule:
    #     kind: threshold_window
    #     input: "min(elbow_left_deg, elbow_right_deg)"
    #     target_min: 45
    #     cutoff_min: 20
    #     direction: higher_is_better

  # safety_caps: []  # בד"כ נשאר מה־base. שנה בזהירות אם יש הצדקה.

# -------------------------------------------------------------------
# 🔁 איתות חזרות (אופציונלי) — אם הווריאנט דורש לוגיקה אחרת
# -------------------------------------------------------------------
# rep_signal:
#   source: "value|min|wrist_left_y_px,wrist_right_y_px"
#   thresholds:
#     min_rom_good: 30
#     min_rep_ms: 400
#     max_rep_ms: 6000
